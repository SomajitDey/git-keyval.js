var be=Object.create;var pt=Object.defineProperty;var xe=Object.getOwnPropertyDescriptor;var ve=Object.getOwnPropertyNames;var Te=Object.getPrototypeOf,Ae=Object.prototype.hasOwnProperty;var Se=(e,t)=>()=>(e&&(t=e(e=0)),t);var _e=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports),Ee=(e,t)=>{for(var r in t)pt(e,r,{get:t[r],enumerable:!0})},Oe=(e,t,r,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let i of ve(t))!Ae.call(e,i)&&i!==r&&pt(e,i,{get:()=>t[i],enumerable:!(s=xe(t,i))||s.enumerable});return e};var Ce=(e,t,r)=>(r=e!=null?be(Te(e)):{},Oe(t||!e||!e.__esModule?pt(r,"default",{value:e,enumerable:!0}):r,e));var kt={};Ee(kt,{LRUCache:()=>Le});var F,zt,wt,qt,it,Nt,Pe,Br,_,It,st,ke,Le,Lt=Se(()=>{F=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,zt=new Set,wt=typeof process=="object"&&process?process:{},qt=(e,t,r,s)=>{typeof wt.emitWarning=="function"?wt.emitWarning(e,t,r,s):console.error(`[${r}] ${t}: ${e}`)},it=globalThis.AbortController,Nt=globalThis.AbortSignal;if(typeof it>"u"){Nt=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(r,s){this._onabort.push(s)}},it=class{constructor(){t()}signal=new Nt;abort(r){if(!this.signal.aborted){this.signal.reason=r,this.signal.aborted=!0;for(let s of this.signal._onabort)s(r);this.signal.onabort?.(r)}}};let e=wt.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{e&&(e=!1,qt("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}Pe=e=>!zt.has(e),Br=Symbol("type"),_=e=>e&&e===Math.floor(e)&&e>0&&isFinite(e),It=e=>_(e)?e<=Math.pow(2,8)?Uint8Array:e<=Math.pow(2,16)?Uint16Array:e<=Math.pow(2,32)?Uint32Array:e<=Number.MAX_SAFE_INTEGER?st:null:null,st=class extends Array{constructor(e){super(e),this.fill(0)}},ke=class k{heap;length;static#s=!1;static create(t){let r=It(t);if(!r)return[];k.#s=!0;let s=new k(t,r);return k.#s=!1,s}constructor(t,r){if(!k.#s)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new r(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},Le=class Pt{#s;#h;#m;#O;#y;#$;#M;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#n;#g;#i;#r;#t;#u;#f;#c;#o;#w;#a;#b;#x;#d;#v;#E;#l;#F;static unsafeExposeInternals(t){return{starts:t.#x,ttls:t.#d,sizes:t.#b,keyMap:t.#i,keyList:t.#r,valList:t.#t,next:t.#u,prev:t.#f,get head(){return t.#c},get tail(){return t.#o},free:t.#w,isBackgroundFetch:r=>t.#e(r),backgroundFetch:(r,s,i,n)=>t.#j(r,s,i,n),moveToTail:r=>t.#U(r),indexes:r=>t.#T(r),rindexes:r=>t.#A(r),isStale:r=>t.#p(r)}}get max(){return this.#s}get maxSize(){return this.#h}get calculatedSize(){return this.#g}get size(){return this.#n}get fetchMethod(){return this.#$}get memoMethod(){return this.#M}get dispose(){return this.#m}get onInsert(){return this.#O}get disposeAfter(){return this.#y}constructor(t){let{max:r=0,ttl:s,ttlResolution:i=1,ttlAutopurge:n,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:h,dispose:l,onInsert:f,disposeAfter:c,noDisposeOnSet:u,noUpdateTTL:d,maxSize:v=0,maxEntrySize:m=0,sizeCalculation:g,fetchMethod:p,memoMethod:w,noDeleteOnFetchRejection:T,noDeleteOnStaleGet:x,allowStaleOnFetchRejection:A,allowStaleOnFetchAbort:q,ignoreFetchAbort:U}=t;if(r!==0&&!_(r))throw new TypeError("max option must be a nonnegative integer");let $=r?It(r):Array;if(!$)throw new Error("invalid max value: "+r);if(this.#s=r,this.#h=v,this.maxEntrySize=m||this.#h,this.sizeCalculation=g,this.sizeCalculation){if(!this.#h&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(w!==void 0&&typeof w!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#M=w,p!==void 0&&typeof p!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#$=p,this.#E=!!p,this.#i=new Map,this.#r=new Array(r).fill(void 0),this.#t=new Array(r).fill(void 0),this.#u=new $(r),this.#f=new $(r),this.#c=0,this.#o=0,this.#w=ke.create(r),this.#n=0,this.#g=0,typeof l=="function"&&(this.#m=l),typeof f=="function"&&(this.#O=f),typeof c=="function"?(this.#y=c,this.#a=[]):(this.#y=void 0,this.#a=void 0),this.#v=!!this.#m,this.#F=!!this.#O,this.#l=!!this.#y,this.noDisposeOnSet=!!u,this.noUpdateTTL=!!d,this.noDeleteOnFetchRejection=!!T,this.allowStaleOnFetchRejection=!!A,this.allowStaleOnFetchAbort=!!q,this.ignoreFetchAbort=!!U,this.maxEntrySize!==0){if(this.#h!==0&&!_(this.#h))throw new TypeError("maxSize must be a positive integer if specified");if(!_(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#k()}if(this.allowStale=!!h,this.noDeleteOnStaleGet=!!x,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=_(i)||i===0?i:1,this.ttlAutopurge=!!n,this.ttl=s||0,this.ttl){if(!_(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#H()}if(this.#s===0&&this.ttl===0&&this.#h===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#s&&!this.#h){let M="LRU_CACHE_UNBOUNDED";Pe(M)&&(zt.add(M),qt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",M,Pt))}}getRemainingTTL(t){return this.#i.has(t)?1/0:0}#H(){let t=new st(this.#s),r=new st(this.#s);this.#d=t,this.#x=r,this.#N=(n,o,a=F.now())=>{if(r[n]=o!==0?a:0,t[n]=o,o!==0&&this.ttlAutopurge){let h=setTimeout(()=>{this.#p(n)&&this.#S(this.#r[n],"expire")},o+1);h.unref&&h.unref()}},this.#C=n=>{r[n]=t[n]!==0?F.now():0},this.#_=(n,o)=>{if(t[o]){let a=t[o],h=r[o];if(!a||!h)return;n.ttl=a,n.start=h,n.now=s||i();let l=n.now-h;n.remainingTTL=a-l}};let s=0,i=()=>{let n=F.now();if(this.ttlResolution>0){s=n;let o=setTimeout(()=>s=0,this.ttlResolution);o.unref&&o.unref()}return n};this.getRemainingTTL=n=>{let o=this.#i.get(n);if(o===void 0)return 0;let a=t[o],h=r[o];if(!a||!h)return 1/0;let l=(s||i())-h;return a-l},this.#p=n=>{let o=r[n],a=t[n];return!!a&&!!o&&(s||i())-o>a}}#C=()=>{};#_=()=>{};#N=()=>{};#p=()=>!1;#k(){let t=new st(this.#s);this.#g=0,this.#b=t,this.#D=r=>{this.#g-=t[r],t[r]=0},this.#z=(r,s,i,n)=>{if(this.#e(s))return 0;if(!_(i))if(n){if(typeof n!="function")throw new TypeError("sizeCalculation must be a function");if(i=n(s,r),!_(i))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return i},this.#B=(r,s,i)=>{if(t[r]=s,this.#h){let n=this.#h-t[r];for(;this.#g>n;)this.#R(!0)}this.#g+=t[r],i&&(i.entrySize=s,i.totalCalculatedSize=this.#g)}}#D=t=>{};#B=(t,r,s)=>{};#z=(t,r,s,i)=>{if(s||i)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#T({allowStale:t=this.allowStale}={}){if(this.#n)for(let r=this.#o;!(!this.#q(r)||((t||!this.#p(r))&&(yield r),r===this.#c));)r=this.#f[r]}*#A({allowStale:t=this.allowStale}={}){if(this.#n)for(let r=this.#c;!(!this.#q(r)||((t||!this.#p(r))&&(yield r),r===this.#o));)r=this.#u[r]}#q(t){return t!==void 0&&this.#i.get(this.#r[t])===t}*entries(){for(let t of this.#T())this.#t[t]!==void 0&&this.#r[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#r[t],this.#t[t]])}*rentries(){for(let t of this.#A())this.#t[t]!==void 0&&this.#r[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#r[t],this.#t[t]])}*keys(){for(let t of this.#T()){let r=this.#r[t];r!==void 0&&!this.#e(this.#t[t])&&(yield r)}}*rkeys(){for(let t of this.#A()){let r=this.#r[t];r!==void 0&&!this.#e(this.#t[t])&&(yield r)}}*values(){for(let t of this.#T())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}*rvalues(){for(let t of this.#A())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,r={}){for(let s of this.#T()){let i=this.#t[s],n=this.#e(i)?i.__staleWhileFetching:i;if(n!==void 0&&t(n,this.#r[s],this))return this.get(this.#r[s],r)}}forEach(t,r=this){for(let s of this.#T()){let i=this.#t[s],n=this.#e(i)?i.__staleWhileFetching:i;n!==void 0&&t.call(r,n,this.#r[s],this)}}rforEach(t,r=this){for(let s of this.#A()){let i=this.#t[s],n=this.#e(i)?i.__staleWhileFetching:i;n!==void 0&&t.call(r,n,this.#r[s],this)}}purgeStale(){let t=!1;for(let r of this.#A({allowStale:!0}))this.#p(r)&&(this.#S(this.#r[r],"expire"),t=!0);return t}info(t){let r=this.#i.get(t);if(r===void 0)return;let s=this.#t[r],i=this.#e(s)?s.__staleWhileFetching:s;if(i===void 0)return;let n={value:i};if(this.#d&&this.#x){let o=this.#d[r],a=this.#x[r];if(o&&a){let h=o-(F.now()-a);n.ttl=h,n.start=Date.now()}}return this.#b&&(n.size=this.#b[r]),n}dump(){let t=[];for(let r of this.#T({allowStale:!0})){let s=this.#r[r],i=this.#t[r],n=this.#e(i)?i.__staleWhileFetching:i;if(n===void 0||s===void 0)continue;let o={value:n};if(this.#d&&this.#x){o.ttl=this.#d[r];let a=F.now()-this.#x[r];o.start=Math.floor(Date.now()-a)}this.#b&&(o.size=this.#b[r]),t.unshift([s,o])}return t}load(t){this.clear();for(let[r,s]of t){if(s.start){let i=Date.now()-s.start;s.start=F.now()-i}this.set(r,s.value,s)}}set(t,r,s={}){if(r===void 0)return this.delete(t),this;let{ttl:i=this.ttl,start:n,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:h}=s,{noUpdateTTL:l=this.noUpdateTTL}=s,f=this.#z(t,r,s.size||0,a);if(this.maxEntrySize&&f>this.maxEntrySize)return h&&(h.set="miss",h.maxEntrySizeExceeded=!0),this.#S(t,"set"),this;let c=this.#n===0?void 0:this.#i.get(t);if(c===void 0)c=this.#n===0?this.#o:this.#w.length!==0?this.#w.pop():this.#n===this.#s?this.#R(!1):this.#n,this.#r[c]=t,this.#t[c]=r,this.#i.set(t,c),this.#u[this.#o]=c,this.#f[c]=this.#o,this.#o=c,this.#n++,this.#B(c,f,h),h&&(h.set="add"),l=!1,this.#F&&this.#O?.(r,t,"add");else{this.#U(c);let u=this.#t[c];if(r!==u){if(this.#E&&this.#e(u)){u.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:d}=u;d!==void 0&&!o&&(this.#v&&this.#m?.(d,t,"set"),this.#l&&this.#a?.push([d,t,"set"]))}else o||(this.#v&&this.#m?.(u,t,"set"),this.#l&&this.#a?.push([u,t,"set"]));if(this.#D(c),this.#B(c,f,h),this.#t[c]=r,h){h.set="replace";let d=u&&this.#e(u)?u.__staleWhileFetching:u;d!==void 0&&(h.oldValue=d)}}else h&&(h.set="update");this.#F&&this.onInsert?.(r,t,r===u?"update":"replace")}if(i!==0&&!this.#d&&this.#H(),this.#d&&(l||this.#N(c,i,n),h&&this.#_(h,c)),!o&&this.#l&&this.#a){let u=this.#a,d;for(;d=u?.shift();)this.#y?.(...d)}return this}pop(){try{for(;this.#n;){let t=this.#t[this.#c];if(this.#R(!0),this.#e(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#l&&this.#a){let t=this.#a,r;for(;r=t?.shift();)this.#y?.(...r)}}}#R(t){let r=this.#c,s=this.#r[r],i=this.#t[r];return this.#E&&this.#e(i)?i.__abortController.abort(new Error("evicted")):(this.#v||this.#l)&&(this.#v&&this.#m?.(i,s,"evict"),this.#l&&this.#a?.push([i,s,"evict"])),this.#D(r),t&&(this.#r[r]=void 0,this.#t[r]=void 0,this.#w.push(r)),this.#n===1?(this.#c=this.#o=0,this.#w.length=0):this.#c=this.#u[r],this.#i.delete(s),this.#n--,r}has(t,r={}){let{updateAgeOnHas:s=this.updateAgeOnHas,status:i}=r,n=this.#i.get(t);if(n!==void 0){let o=this.#t[n];if(this.#e(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#p(n))i&&(i.has="stale",this.#_(i,n));else return s&&this.#C(n),i&&(i.has="hit",this.#_(i,n)),!0}else i&&(i.has="miss");return!1}peek(t,r={}){let{allowStale:s=this.allowStale}=r,i=this.#i.get(t);if(i===void 0||!s&&this.#p(i))return;let n=this.#t[i];return this.#e(n)?n.__staleWhileFetching:n}#j(t,r,s,i){let n=r===void 0?void 0:this.#t[r];if(this.#e(n))return n;let o=new it,{signal:a}=s;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let h={signal:o.signal,options:s,context:i},l=(m,g=!1)=>{let{aborted:p}=o.signal,w=s.ignoreFetchAbort&&m!==void 0;if(s.status&&(p&&!g?(s.status.fetchAborted=!0,s.status.fetchError=o.signal.reason,w&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),p&&!w&&!g)return c(o.signal.reason);let T=d;return this.#t[r]===d&&(m===void 0?T.__staleWhileFetching?this.#t[r]=T.__staleWhileFetching:this.#S(t,"fetch"):(s.status&&(s.status.fetchUpdated=!0),this.set(t,m,h.options))),m},f=m=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=m),c(m)),c=m=>{let{aborted:g}=o.signal,p=g&&s.allowStaleOnFetchAbort,w=p||s.allowStaleOnFetchRejection,T=w||s.noDeleteOnFetchRejection,x=d;if(this.#t[r]===d&&(!T||x.__staleWhileFetching===void 0?this.#S(t,"fetch"):p||(this.#t[r]=x.__staleWhileFetching)),w)return s.status&&x.__staleWhileFetching!==void 0&&(s.status.returnedStale=!0),x.__staleWhileFetching;if(x.__returned===x)throw m},u=(m,g)=>{let p=this.#$?.(t,n,h);p&&p instanceof Promise&&p.then(w=>m(w===void 0?void 0:w),g),o.signal.addEventListener("abort",()=>{(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort)&&(m(void 0),s.allowStaleOnFetchAbort&&(m=w=>l(w,!0)))})};s.status&&(s.status.fetchDispatched=!0);let d=new Promise(u).then(l,f),v=Object.assign(d,{__abortController:o,__staleWhileFetching:n,__returned:void 0});return r===void 0?(this.set(t,v,{...h.options,status:void 0}),r=this.#i.get(t)):this.#t[r]=v,v}#e(t){if(!this.#E)return!1;let r=t;return!!r&&r instanceof Promise&&r.hasOwnProperty("__staleWhileFetching")&&r.__abortController instanceof it}async fetch(t,r={}){let{allowStale:s=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:h=0,sizeCalculation:l=this.sizeCalculation,noUpdateTTL:f=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:u=this.allowStaleOnFetchRejection,ignoreFetchAbort:d=this.ignoreFetchAbort,allowStaleOnFetchAbort:v=this.allowStaleOnFetchAbort,context:m,forceRefresh:g=!1,status:p,signal:w}=r;if(!this.#E)return p&&(p.fetch="get"),this.get(t,{allowStale:s,updateAgeOnGet:i,noDeleteOnStaleGet:n,status:p});let T={allowStale:s,updateAgeOnGet:i,noDeleteOnStaleGet:n,ttl:o,noDisposeOnSet:a,size:h,sizeCalculation:l,noUpdateTTL:f,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:u,allowStaleOnFetchAbort:v,ignoreFetchAbort:d,status:p,signal:w},x=this.#i.get(t);if(x===void 0){p&&(p.fetch="miss");let A=this.#j(t,x,T,m);return A.__returned=A}else{let A=this.#t[x];if(this.#e(A)){let M=s&&A.__staleWhileFetching!==void 0;return p&&(p.fetch="inflight",M&&(p.returnedStale=!0)),M?A.__staleWhileFetching:A.__returned=A}let q=this.#p(x);if(!g&&!q)return p&&(p.fetch="hit"),this.#U(x),i&&this.#C(x),p&&this.#_(p,x),A;let U=this.#j(t,x,T,m),$=U.__staleWhileFetching!==void 0&&s;return p&&(p.fetch=q?"stale":"refresh",$&&q&&(p.returnedStale=!0)),$?U.__staleWhileFetching:U.__returned=U}}async forceFetch(t,r={}){let s=await this.fetch(t,r);if(s===void 0)throw new Error("fetch() returned undefined");return s}memo(t,r={}){let s=this.#M;if(!s)throw new Error("no memoMethod provided to constructor");let{context:i,forceRefresh:n,...o}=r,a=this.get(t,o);if(!n&&a!==void 0)return a;let h=s(t,a,{options:o,context:i});return this.set(t,h,o),h}get(t,r={}){let{allowStale:s=this.allowStale,updateAgeOnGet:i=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,status:o}=r,a=this.#i.get(t);if(a!==void 0){let h=this.#t[a],l=this.#e(h);return o&&this.#_(o,a),this.#p(a)?(o&&(o.get="stale"),l?(o&&s&&h.__staleWhileFetching!==void 0&&(o.returnedStale=!0),s?h.__staleWhileFetching:void 0):(n||this.#S(t,"expire"),o&&s&&(o.returnedStale=!0),s?h:void 0)):(o&&(o.get="hit"),l?h.__staleWhileFetching:(this.#U(a),i&&this.#C(a),h))}else o&&(o.get="miss")}#I(t,r){this.#f[r]=t,this.#u[t]=r}#U(t){t!==this.#o&&(t===this.#c?this.#c=this.#u[t]:this.#I(this.#f[t],this.#u[t]),this.#I(this.#o,t),this.#o=t)}delete(t){return this.#S(t,"delete")}#S(t,r){let s=!1;if(this.#n!==0){let i=this.#i.get(t);if(i!==void 0)if(s=!0,this.#n===1)this.#P(r);else{this.#D(i);let n=this.#t[i];if(this.#e(n)?n.__abortController.abort(new Error("deleted")):(this.#v||this.#l)&&(this.#v&&this.#m?.(n,t,r),this.#l&&this.#a?.push([n,t,r])),this.#i.delete(t),this.#r[i]=void 0,this.#t[i]=void 0,i===this.#o)this.#o=this.#f[i];else if(i===this.#c)this.#c=this.#u[i];else{let o=this.#f[i];this.#u[o]=this.#u[i];let a=this.#u[i];this.#f[a]=this.#f[i]}this.#n--,this.#w.push(i)}}if(this.#l&&this.#a?.length){let i=this.#a,n;for(;n=i?.shift();)this.#y?.(...n)}return s}clear(){return this.#P("delete")}#P(t){for(let r of this.#A({allowStale:!0})){let s=this.#t[r];if(this.#e(s))s.__abortController.abort(new Error("deleted"));else{let i=this.#r[r];this.#v&&this.#m?.(s,i,t),this.#l&&this.#a?.push([s,i,t])}}if(this.#i.clear(),this.#t.fill(void 0),this.#r.fill(void 0),this.#d&&this.#x&&(this.#d.fill(0),this.#x.fill(0)),this.#b&&this.#b.fill(0),this.#c=0,this.#o=0,this.#w.length=0,this.#g=0,this.#n=0,this.#l&&this.#a){let r=this.#a,s;for(;s=r?.shift();)this.#y?.(...s)}}}});var ce=_e((Gr,Z)=>{"use strict";var ut=function(){};ut.prototype=Object.create(null);var ht=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,ct=/\\([\v\u0020-\u00ff])/gu,oe=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,C={type:"",parameters:new ut};Object.freeze(C.parameters);Object.freeze(C);function ae(e){if(typeof e!="string")throw new TypeError("argument header is required and must be a string");let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim();if(oe.test(r)===!1)throw new TypeError("invalid media type");let s={type:r.toLowerCase(),parameters:new ut};if(t===-1)return s;let i,n,o;for(ht.lastIndex=t;n=ht.exec(e);){if(n.index!==t)throw new TypeError("invalid parameter format");t+=n[0].length,i=n[1].toLowerCase(),o=n[2],o[0]==='"'&&(o=o.slice(1,o.length-1),ct.test(o)&&(o=o.replace(ct,"$1"))),s.parameters[i]=o}if(t!==e.length)throw new TypeError("invalid parameter format");return s}function he(e){if(typeof e!="string")return C;let t=e.indexOf(";"),r=t!==-1?e.slice(0,t).trim():e.trim();if(oe.test(r)===!1)return C;let s={type:r.toLowerCase(),parameters:new ut};if(t===-1)return s;let i,n,o;for(ht.lastIndex=t;n=ht.exec(e);){if(n.index!==t)return C;t+=n[0].length,i=n[1].toLowerCase(),o=n[2],o[0]==='"'&&(o=o.slice(1,o.length-1),ct.test(o)&&(o=o.replace(ct,"$1"))),s.parameters[i]=o}return t!==e.length?C:s}Z.exports.default={parse:ae,safeParse:he};Z.exports.parse=ae;Z.exports.safeParse=he;Z.exports.defaultContentType=C});var tt=typeof Buffer=="function",Ur=typeof TextDecoder=="function"?new TextDecoder:void 0,$r=typeof TextEncoder=="function"?new TextEncoder:void 0,De="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",I=Array.prototype.slice.call(De),X=(e=>{let t={};return e.forEach((r,s)=>t[r]=s),t})(I),Ue=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,Q=String.fromCharCode.bind(String),Ut=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):e=>new Uint8Array(Array.prototype.slice.call(e,0)),$e=e=>e.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Mt=e=>e.replace(/[^A-Za-z0-9\+\/]/g,""),Me=e=>{let t,r,s,i,n="",o=e.length%3;for(let a=0;a<e.length;){if((r=e.charCodeAt(a++))>255||(s=e.charCodeAt(a++))>255||(i=e.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=r<<16|s<<8|i,n+=I[t>>18&63]+I[t>>12&63]+I[t>>6&63]+I[t&63]}return o?n.slice(0,o-3)+"===".substring(o):n},Fe=typeof btoa=="function"?e=>btoa(e):tt?e=>Buffer.from(e,"binary").toString("base64"):Me,$t=tt?e=>Buffer.from(e).toString("base64"):e=>{let r=[];for(let s=0,i=e.length;s<i;s+=4096)r.push(Q.apply(null,e.subarray(s,s+4096)));return Fe(r.join(""))},mt=(e,t=!1)=>t?$e($t(e)):$t(e);var Be=e=>{if(e=e.replace(/\s+/g,""),!Ue.test(e))throw new TypeError("malformed base64.");e+="==".slice(2-(e.length&3));let t,r="",s,i;for(let n=0;n<e.length;)t=X[e.charAt(n++)]<<18|X[e.charAt(n++)]<<12|(s=X[e.charAt(n++)])<<6|(i=X[e.charAt(n++)]),r+=s===64?Q(t>>16&255):i===64?Q(t>>16&255,t>>8&255):Q(t>>16&255,t>>8&255,t&255);return r},Re=typeof atob=="function"?e=>atob(Mt(e)):tt?e=>Buffer.from(e,"base64").toString("binary"):Be,je=tt?e=>Ut(Buffer.from(e,"base64")):e=>Ut(Re(e).split("").map(t=>t.charCodeAt(0))),et=e=>je(He(e));var He=e=>Mt(e.replace(/[-_]/g,t=>t=="-"?"+":"/"));function Ft(e){return mt(e)}function Ne(e){return mt(e,!0)}var ze=new TextEncoder,qe=new TextDecoder;function S(e){return ze.encode(e)}function P(e){return qe.decode(e)}function yt(e){return Array.from(e).map(t=>t.toString(16).padStart(2,"0")).join("")}function gt(e){let t=e.length;if(t%2!==0)throw new Error("Number of provided nibbles must be even");let r=[];for(let s=0;s<t;s+=2)r.push(parseInt(e[s]+e[s+1],16));return Uint8Array.from(r)}function Bt(e){return Ne(gt(e))}function Rt(e){return yt(et(e))}function jt(e){return new Uint8Array(new Float64Array([e]).buffer)}function Ht(e){return new Float64Array(e.buffer)[0]}async function rt([...e]){return new Uint8Array(await new Blob(e).arrayBuffer())}var L=class e{static mimeDbCdnVersion="4.0.0-1.54.0";static cdnBase=`https://cdn.jsdelivr.net/npm/mime-db-cdn@${e.mimeDbCdnVersion}`;cache;#s={};async fetch(...t){return globalThis.fetch(...t)}constructor({fetch:t,cacheMaxEntries:r}={}){t&&(this.fetch=t),r&&(this.#s.max=r)}async#h(){if(this.cache===void 0&&Object.keys(this.#s).length!==0){let{LRUCache:t}=await Promise.resolve().then(()=>(Lt(),kt));this.cache=new t(this.#s)}return this.cache}async query(t){let r=e.cdnBase+`/mime-types/${t}/data.json`;return this.fetch(r).then(s=>{if(s.status===404)throw new Error("Not Found");return s.json()})}async mimeToExtensions(t){let[r]=t.split(";"),s=await this.#h(),i=s?.get(r);return i===void 0&&({extensions:i}=await this.query(r),s?.set(r,i)),i??[]}getExtensions=this.mimeToExtensions;async extensionToMimes(t){let r=t.split("/").pop().split(".").pop(),s=await this.#h(),i=s?.get(r);if(i===void 0){let n=e.cdnBase+`/extensions/${r}/data.json`;({mimeTypes:i}=await this.fetch(n).then(o=>{if(o.status===404)throw new Error("Not Found");return o.json()})),s?.set(r,i)}return i??[]}getTypes=this.extensionToMimes;async extensionToMime(t){let[r,...s]=await this.getTypes(t);return r}getType=this.extensionToMime};var We=new L({cacheMaxEntries:32}),bt=["Number","Boolean","String","JSON","Blob","ArrayBuffer"];function B(e){return Object.prototype.toString.call(e).split(" ").pop().slice(0,-1)}async function Wt(e){let t=B(e);switch(t){case"Number":if(e.toString().length>7)return{type:t,bytes:jt(e)};case"Boolean":case"String":return{type:t,bytes:S(e.toString()),extension:"txt"};case"Null":case"Array":case"Object":return{type:"JSON",bytes:S(JSON.stringify(e)),extension:"json"};case"Blob":let r=new Uint8Array(await e.arrayBuffer()),s=e.type,[i]=await We.getExtensions(s).catch(()=>[]);return{type:t,mimeType:s,bytes:r,extension:i};case"Uint8Array":return{bytes:e};case"ArrayBuffer":return{type:t,bytes:new Uint8Array(e)};default:throw new Error("Unsupported parameter type")}}function nt({type:e="Uint8Array",mimeType:t,bytes:r}){switch(e){case"Number":return r.length===8?Ht(r):Number(P(r));case"Boolean":return P(r)==="true";case"String":return P(r);case"JSON":return JSON.parse(P(r));case"Blob":return new Blob([r],{type:t});case"ArrayBuffer":return r.buffer;case"Uint8Array":return r;default:throw new Error("Unsupported type")}}var xt={},W={},ot="en",vt={MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"],MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dd:["Su","Mo","Tu","We","Th","Fr","Sa"],A:["AM","PM"]},Gt={YYYY:function(e){return("000"+e.getFullYear()).slice(-4)},YY:function(e){return("0"+e.getFullYear()).slice(-2)},Y:function(e){return""+e.getFullYear()},MMMM:function(e){return this.res.MMMM[e.getMonth()]},MMM:function(e){return this.res.MMM[e.getMonth()]},MM:function(e){return("0"+(e.getMonth()+1)).slice(-2)},M:function(e){return""+(e.getMonth()+1)},DD:function(e){return("0"+e.getDate()).slice(-2)},D:function(e){return""+e.getDate()},HH:function(e){return("0"+e.getHours()).slice(-2)},H:function(e){return""+e.getHours()},A:function(e){return this.res.A[e.getHours()>11|0]},hh:function(e){return("0"+(e.getHours()%12||12)).slice(-2)},h:function(e){return""+(e.getHours()%12||12)},mm:function(e){return("0"+e.getMinutes()).slice(-2)},m:function(e){return""+e.getMinutes()},ss:function(e){return("0"+e.getSeconds()).slice(-2)},s:function(e){return""+e.getSeconds()},SSS:function(e){return("00"+e.getMilliseconds()).slice(-3)},SS:function(e){return("0"+(e.getMilliseconds()/10|0)).slice(-2)},S:function(e){return""+(e.getMilliseconds()/100|0)},dddd:function(e){return this.res.dddd[e.getDay()]},ddd:function(e){return this.res.ddd[e.getDay()]},dd:function(e){return this.res.dd[e.getDay()]},Z:function(e){var t=e.getTimezoneOffset()/.6|0;return(t>0?"-":"+")+("000"+Math.abs(t-(t%100*.4|0))).slice(-4)},ZZ:function(e){var t=e.getTimezoneOffset(),r=Math.abs(t);return(t>0?"-":"+")+("0"+(r/60|0)).slice(-2)+":"+("0"+r%60).slice(-2)},post:function(e){return e},res:vt},Vt={YYYY:function(e){return this.exec(/^\d{4}/,e)},Y:function(e){return this.exec(/^\d{1,4}/,e)},MMMM:function(e){var t=this.find(this.res.MMMM,e);return t.value++,t},MMM:function(e){var t=this.find(this.res.MMM,e);return t.value++,t},MM:function(e){return this.exec(/^\d\d/,e)},M:function(e){return this.exec(/^\d\d?/,e)},DD:function(e){return this.exec(/^\d\d/,e)},D:function(e){return this.exec(/^\d\d?/,e)},HH:function(e){return this.exec(/^\d\d/,e)},H:function(e){return this.exec(/^\d\d?/,e)},A:function(e){return this.find(this.res.A,e)},hh:function(e){return this.exec(/^\d\d/,e)},h:function(e){return this.exec(/^\d\d?/,e)},mm:function(e){return this.exec(/^\d\d/,e)},m:function(e){return this.exec(/^\d\d?/,e)},ss:function(e){return this.exec(/^\d\d/,e)},s:function(e){return this.exec(/^\d\d?/,e)},SSS:function(e){return this.exec(/^\d{1,3}/,e)},SS:function(e){var t=this.exec(/^\d\d?/,e);return t.value*=10,t},S:function(e){var t=this.exec(/^\d/,e);return t.value*=100,t},Z:function(e){var t=this.exec(/^[+-]\d{2}[0-5]\d/,e);return t.value=(t.value/100|0)*-60-t.value%100,t},ZZ:function(e){var t=/^([+-])(\d{2}):([0-5]\d)/.exec(e)||["","","",""];return{value:0-((t[1]+t[2]|0)*60+(t[1]+t[3]|0)),length:t[0].length}},h12:function(e,t){return(e===12?0:e)+t*12},exec:function(e,t){var r=(e.exec(t)||[""])[0];return{value:r|0,length:r.length}},find:function(e,t){for(var r=-1,s=0,i=0,n=e.length,o;i<n;i++)o=e[i],!t.indexOf(o)&&o.length>s&&(r=i,s=o.length);return{value:r,length:s}},pre:function(e){return e},res:vt},E=function(e,t,r,s){var i={},n;for(n in e)i[n]=e[n];for(n in t||{})!!r^!!i[n]||(i[n]=t[n]);return s&&(i.res=s),i},b={_formatter:Gt,_parser:Vt},y;b.compile=function(e){return[e].concat(e.match(/\[(?:[^[\]]|\[[^[\]]*])*]|([A-Za-z])\1*|\.{3}|./g)||[])};b.format=function(e,t,r){for(var s=this||y,i=typeof t=="string"?s.compile(t):t,n=s._formatter,o=function(){if(r){var u=new Date(e.getTime());return u.getFullYear=u.getUTCFullYear,u.getMonth=u.getUTCMonth,u.getDate=u.getUTCDate,u.getHours=u.getUTCHours,u.getMinutes=u.getUTCMinutes,u.getSeconds=u.getUTCSeconds,u.getMilliseconds=u.getUTCMilliseconds,u.getDay=u.getUTCDay,u.getTimezoneOffset=function(){return 0},u.getTimezoneName=function(){return"UTC"},u}return e}(),a=/^\[(.*)\]$/,h="",l=1,f=i.length,c;l<f;l++)c=i[l],h+=n[c]?n.post(n[c](o,i[0])):a.test(c)?c.replace(a,"$1"):c;return h};b.preparse=function(e,t){var r=this||y,s=typeof t=="string"?r.compile(t):t,i=r._parser,n={Y:1970,M:1,D:1,H:0,A:0,h:0,m:0,s:0,S:0,Z:0,_index:0,_length:0,_match:0},o=" ",a=/^\[(.*)\]$/,h="...";e=i.pre(e);for(var l=1,f=s.length,c,u,d;l<f;l++)if(c=s[l],u=e.substring(n._index),i[c]){if(d=i[c](u,s[0]),!d.length)break;n[d.token||c.charAt(0)]=d.value,n._index+=d.length,n._match++}else if(c===u.charAt(0)||c===o)n._index++;else if(a.test(c)&&!u.indexOf(c.replace(a,"$1")))n._index+=c.length-2;else if(c===h){n._index=e.length;break}else break;return n.H=n.H||i.h12(n.h,n.A),n._length=e.length,n};b.parse=function(e,t,r){var s=this||y,i=typeof t=="string"?s.compile(t):t,n=s.preparse(e,i);return s.isValid(n)?(n.M-=n.Y<100?22801:1,r||~s._parser.find(i,"ZZ").value?new Date(Date.UTC(n.Y,n.M,n.D,n.H,n.m+n.Z,n.s,n.S)):new Date(n.Y,n.M,n.D,n.H,n.m,n.s,n.S)):new Date(NaN)};b.isValid=function(e,t){var r=this||y,s=typeof e=="string"?r.preparse(e,t):e;return!(s._index<1||s._length<1||s._index-s._length||s._match<1||s.Y<1||s.Y>9999||s.M<1||s.M>12||s.D<1||s.D>new Date(s.Y,s.M,0).getDate()||s.H<0||s.H>23||s.m<0||s.m>59||s.s<0||s.s>59||s.S<0||s.S>999||s.Z<-840||s.Z>720)};b.transform=function(e,t,r,s){let i=this||y;return i.format(i.parse(e,t),r,s)};b.addYears=function(e,t,r){return(this||y).addMonths(e,t*12,r)};b.addMonths=function(e,t,r){var s=new Date(e.getTime());if(r){if(s.setUTCMonth(s.getUTCMonth()+t),s.getUTCDate()<e.getUTCDate())return s.setUTCDate(0),s}else if(s.setMonth(s.getMonth()+t),s.getDate()<e.getDate())return s.setDate(0),s;return s};b.addDays=function(e,t,r){var s=new Date(e.getTime());return r?s.setUTCDate(s.getUTCDate()+t):s.setDate(s.getDate()+t),s};b.addHours=function(e,t){return new Date(e.getTime()+t*60*60*1e3)};b.addMinutes=function(e,t){return new Date(e.getTime()+t*60*1e3)};b.addSeconds=function(e,t){return new Date(e.getTime()+t*1e3)};b.addMilliseconds=function(e,t){return new Date(e.getTime()+t)};b.subtract=function(e,t){var r=e.getTime()-t.getTime();return{toMilliseconds:function(){return r},toSeconds:function(){return r/1e3},toMinutes:function(){return r/6e4},toHours:function(){return r/36e5},toDays:function(){return r/864e5}}};b.isLeapYear=function(e){return!(e%4)&&!!(e%100)||!(e%400)};b.isSameDay=function(e,t){return e.toDateString()===t.toDateString()};b.locale=function(e,t){xt[e]||(xt[e]=t)};b.plugin=function(e,t){W[e]||(W[e]=t)};y=E(b);y.locale=function(e){var t=typeof e=="function"?e:y.locale[e];if(!t)return ot;ot=t(b);var r=xt[ot]||{},s=E(vt,r.res,!0),i=E(Gt,r.formatter,!0,s),n=E(Vt,r.parser,!0,s);y._formatter=i,y._parser=n;for(var o in W)y.extend(W[o]);return ot};y.extend=function(e){var t=E(y._parser.res,e.res),r=e.extender||{};y._formatter=E(y._formatter,e.formatter,!1,t),y._parser=E(y._parser,e.parser,!1,t);for(var s in r)y[s]||(y[s]=r[s])};y.plugin=function(e){var t=typeof e=="function"?e:y.plugin[e];t&&y.extend(W[t(b,y)]||{})};var O=y;var Ve=new Date("2025-01-01T00:00:00Z"),R=10002,Yt=R-1;function Zt(e=new Date){return new Date(e.setUTCHours(23,59,59,0))}function G(e=new Date){return Math.floor(O.subtract(e,Ve).toDays())%R}function at(e=new Date){return G(O.addDays(e,-1))}function Ye(e,t){return(t-e+R)%R}function Jt(e){if(isNaN(e)||e<0||e>R-1)throw new Error(`Index must be within [0, ${R-1}]`);let t=Zt(),r=G(t);if(e===r)return t;if(e===at())return O.addDays(t,-1);let s=Ye(r,e);return O.addDays(t,s)}function Tt(e,t=new Date){if(isNaN(e)||e<-1||e>Yt-1)throw new Error(`TTL must be within [-1, ${Yt-1}]`);return O.addDays(Zt(t),Math.floor(e))}function Kt(e){let t=new Date;return e.getTime()<t.getTime()?0:O.subtract(e,t).toDays()}function Xt(e){return e===at()}var V=class e extends Map{inv;constructor(t,r){if(super(t),r)this.inv=r;else{let s=Array.from(this).map(([i,n])=>[n,i]);if(this.inv=new e(s,this),this.inv.size<s.length)throw new Error("Breaking bijection")}if(this.size!==this.inv.size)throw new Error("Breaking bijection")}delete(t){let r=this.get(t);return this.inv?.__delete(r),super.delete(t)}__delete(t){return super.delete(t)}set(t,r){if(this.inv?.has(r))throw new Error("Breaking bijection");return this.delete(t),this.inv?.__set(r,t),super.set(t,r)}regenInverseOf(){this.inv.__clear();for(let[t,r]of this.entries())this.inv.__set(r,t)}push(t,r){if(!this.inv?.has(r))return this.set(t,r);this.__delete(this.inv.get(r)),this.__set(t,r),this.regenInverseOf()}__set(t,r){return super.set(t,r)}clear(){return this.inv?.__clear(),super.clear()}__clear(){return super.clear()}};function j(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var Je="0.0.0-development",Ke=`octokit-endpoint.js/${Je} ${j()}`,Xe={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":Ke},mediaType:{format:""}};function Qe(e){return e?Object.keys(e).reduce((t,r)=>(t[r.toLowerCase()]=e[r],t),{}):{}}function tr(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(e)}function ee(e,t){let r=Object.assign({},e);return Object.keys(t).forEach(s=>{tr(t[s])?s in e?r[s]=ee(e[s],t[s]):Object.assign(r,{[s]:t[s]}):Object.assign(r,{[s]:t[s]})}),r}function Qt(e){for(let t in e)e[t]===void 0&&delete e[t];return e}function St(e,t,r){if(typeof t=="string"){let[i,n]=t.split(" ");r=Object.assign(n?{method:i,url:n}:{url:i},r)}else r=Object.assign({},t);r.headers=Qe(r.headers),Qt(r),Qt(r.headers);let s=ee(e||{},r);return r.url==="/graphql"&&(e&&e.mediaType.previews?.length&&(s.mediaType.previews=e.mediaType.previews.filter(i=>!s.mediaType.previews.includes(i)).concat(s.mediaType.previews)),s.mediaType.previews=(s.mediaType.previews||[]).map(i=>i.replace(/-preview/,""))),s}function er(e,t){let r=/\?/.test(e)?"&":"?",s=Object.keys(t);return s.length===0?e:e+r+s.map(i=>i==="q"?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${i}=${encodeURIComponent(t[i])}`).join("&")}var rr=/\{[^{}}]+\}/g;function sr(e){return e.replace(/(?:^\W+)|(?:(?<!\W)\W+$)/g,"").split(/,/)}function ir(e){let t=e.match(rr);return t?t.map(sr).reduce((r,s)=>r.concat(s),[]):[]}function te(e,t){let r={__proto__:null};for(let s of Object.keys(e))t.indexOf(s)===-1&&(r[s]=e[s]);return r}function re(e){return e.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t}).join("")}function N(e){return encodeURIComponent(e).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function Y(e,t,r){return t=e==="+"||e==="#"?re(t):N(t),r?N(r)+"="+t:t}function H(e){return e!=null}function At(e){return e===";"||e==="&"||e==="?"}function nr(e,t,r,s){var i=e[r],n=[];if(H(i)&&i!=="")if(typeof i=="string"||typeof i=="number"||typeof i=="boolean")i=i.toString(),s&&s!=="*"&&(i=i.substring(0,parseInt(s,10))),n.push(Y(t,i,At(t)?r:""));else if(s==="*")Array.isArray(i)?i.filter(H).forEach(function(o){n.push(Y(t,o,At(t)?r:""))}):Object.keys(i).forEach(function(o){H(i[o])&&n.push(Y(t,i[o],o))});else{let o=[];Array.isArray(i)?i.filter(H).forEach(function(a){o.push(Y(t,a))}):Object.keys(i).forEach(function(a){H(i[a])&&(o.push(N(a)),o.push(Y(t,i[a].toString())))}),At(t)?n.push(N(r)+"="+o.join(",")):o.length!==0&&n.push(o.join(","))}else t===";"?H(i)&&n.push(N(r)):i===""&&(t==="&"||t==="?")?n.push(N(r)+"="):i===""&&n.push("");return n}function or(e){return{expand:ar.bind(null,e)}}function ar(e,t){var r=["+","#",".","/",";","?","&"];return e=e.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(s,i,n){if(i){let a="",h=[];if(r.indexOf(i.charAt(0))!==-1&&(a=i.charAt(0),i=i.substr(1)),i.split(/,/g).forEach(function(l){var f=/([^:\*]*)(?::(\d+)|(\*))?/.exec(l);h.push(nr(t,a,f[1],f[2]||f[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(h.length!==0?a:"")+h.join(o)}else return h.join(",")}else return re(n)}),e==="/"?e:e.replace(/\/$/,"")}function se(e){let t=e.method.toUpperCase(),r=(e.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),s=Object.assign({},e.headers),i,n=te(e,["method","baseUrl","url","headers","request","mediaType"]),o=ir(r);r=or(r).expand(n),/^http/.test(r)||(r=e.baseUrl+r);let a=Object.keys(e).filter(f=>o.includes(f)).concat("baseUrl"),h=te(n,a);if(!/application\/octet-stream/i.test(s.accept)&&(e.mediaType.format&&(s.accept=s.accept.split(/,/).map(f=>f.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${e.mediaType.format}`)).join(",")),r.endsWith("/graphql")&&e.mediaType.previews?.length)){let f=s.accept.match(/(?<![\w-])[\w-]+(?=-preview)/g)||[];s.accept=f.concat(e.mediaType.previews).map(c=>{let u=e.mediaType.format?`.${e.mediaType.format}`:"+json";return`application/vnd.github.${c}-preview${u}`}).join(",")}return["GET","HEAD"].includes(t)?r=er(r,h):"data"in h?i=h.data:Object.keys(h).length&&(i=h),!s["content-type"]&&typeof i<"u"&&(s["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(t)&&typeof i>"u"&&(i=""),Object.assign({method:t,url:r,headers:s},typeof i<"u"?{body:i}:null,e.request?{request:e.request}:null)}function hr(e,t,r){return se(St(e,t,r))}function ie(e,t){let r=St(e,t),s=hr.bind(null,r);return Object.assign(s,{DEFAULTS:r,defaults:ie.bind(null,r),merge:St.bind(null,r),parse:se})}var ne=ie(null,Xe);var le=Ce(ce(),1);var D=class extends Error{name;status;request;response;constructor(t,r,s){super(t),this.name="HttpError",this.status=Number.parseInt(r),Number.isNaN(this.status)&&(this.status=0),"response"in s&&(this.response=s.response);let i=Object.assign({},s.request);s.request.headers.authorization&&(i.headers=Object.assign({},s.request.headers,{authorization:s.request.headers.authorization.replace(/(?<! ) .*$/," [REDACTED]")})),i.url=i.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=i}};var cr="0.0.0-development",ur={headers:{"user-agent":`octokit-request.js/${cr} ${j()}`}};function lr(e){if(typeof e!="object"||e===null||Object.prototype.toString.call(e)!=="[object Object]")return!1;let t=Object.getPrototypeOf(e);if(t===null)return!0;let r=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof r=="function"&&r instanceof r&&Function.prototype.call(r)===Function.prototype.call(e)}async function ue(e){let t=e.request?.fetch||globalThis.fetch;if(!t)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let r=e.request?.log||console,s=e.request?.parseSuccessResponseBody!==!1,i=lr(e.body)||Array.isArray(e.body)?JSON.stringify(e.body):e.body,n=Object.fromEntries(Object.entries(e.headers).map(([c,u])=>[c,String(u)])),o;try{o=await t(e.url,{method:e.method,body:i,redirect:e.request?.redirect,headers:n,signal:e.request?.signal,...e.body&&{duplex:"half"}})}catch(c){let u="Unknown Error";if(c instanceof Error){if(c.name==="AbortError")throw c.status=500,c;u=c.message,c.name==="TypeError"&&"cause"in c&&(c.cause instanceof Error?u=c.cause.message:typeof c.cause=="string"&&(u=c.cause))}let d=new D(u,500,{request:e});throw d.cause=c,d}let a=o.status,h=o.url,l={};for(let[c,u]of o.headers)l[c]=u;let f={url:h,status:a,headers:l,data:""};if("deprecation"in l){let c=l.link&&l.link.match(/<([^<>]+)>; rel="deprecation"/),u=c&&c.pop();r.warn(`[@octokit/request] "${e.method} ${e.url}" is deprecated. It is scheduled to be removed on ${l.sunset}${u?`. See ${u}`:""}`)}if(a===204||a===205)return f;if(e.method==="HEAD"){if(a<400)return f;throw new D(o.statusText,a,{response:f,request:e})}if(a===304)throw f.data=await _t(o),new D("Not modified",a,{response:f,request:e});if(a>=400)throw f.data=await _t(o),new D(dr(f.data),a,{response:f,request:e});return f.data=s?await _t(o):o.body,f}async function _t(e){let t=e.headers.get("content-type");if(!t)return e.text().catch(()=>"");let r=(0,le.safeParse)(t);if(fr(r)){let s="";try{return s=await e.text(),JSON.parse(s)}catch{return s}}else return r.type.startsWith("text/")||r.parameters.charset?.toLowerCase()==="utf-8"?e.text().catch(()=>""):e.arrayBuffer().catch(()=>new ArrayBuffer(0))}function fr(e){return e.type==="application/json"||e.type==="application/scim+json"}function dr(e){if(typeof e=="string")return e;if(e instanceof ArrayBuffer)return"Unknown error";if("message"in e){let t="documentation_url"in e?` - ${e.documentation_url}`:"";return Array.isArray(e.errors)?`${e.message}: ${e.errors.map(r=>JSON.stringify(r)).join(", ")}${t}`:`${e.message}${t}`}return`Unknown error: ${JSON.stringify(e)}`}function Et(e,t){let r=e.defaults(t);return Object.assign(function(i,n){let o=r.merge(i,n);if(!o.request||!o.request.hook)return ue(r.parse(o));let a=(h,l)=>ue(r.parse(r.merge(h,l)));return Object.assign(a,{endpoint:r,defaults:Et.bind(null,r)}),o.request.hook(a,o)},{endpoint:r,defaults:Et.bind(null,r)})}var lt=Et(ne,ur);var pr="0.0.0-development";function mr(e){return`Request failed due to following response errors:
`+e.errors.map(t=>` - ${t.message}`).join(`
`)}var yr=class extends Error{constructor(e,t,r){super(mr(r)),this.request=e,this.headers=t,this.response=r,this.errors=r.errors,this.data=r.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},gr=["method","baseUrl","url","headers","request","query","mediaType","operationName"],wr=["query","method","url"],fe=/\/api\/v3\/?$/;function br(e,t,r){if(r){if(typeof t=="string"&&"query"in r)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let o in r)if(wr.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}let s=typeof t=="string"?Object.assign({query:t},r):t,i=Object.keys(s).reduce((o,a)=>gr.includes(a)?(o[a]=s[a],o):(o.variables||(o.variables={}),o.variables[a]=s[a],o),{}),n=s.baseUrl||e.endpoint.DEFAULTS.baseUrl;return fe.test(n)&&(i.url=n.replace(fe,"/api/graphql")),e(i).then(o=>{if(o.data.errors){let a={};for(let h of Object.keys(o.headers))a[h]=o.headers[h];throw new yr(i,a,o.data)}return o.data.data})}function Ot(e,t){let r=e.defaults(t);return Object.assign((i,n)=>br(r,i,n),{defaults:Ot.bind(null,r),endpoint:r.endpoint})}var ts=Ot(lt,{headers:{"user-agent":`octokit-graphql.js/${pr} ${j()}`},method:"POST",url:"/graphql"});function de(e){return Ot(e,{method:"POST",url:"/graphql"})}async function pe(e,t="SHA-256"){return crypto.subtle.digest(t,e).then(r=>new Uint8Array(r))}async function Dt(e,t="blob",r="SHA-1"){let s=await rt([S(`${t} ${e.length}\0`),e]);return yt(await pe(s,r))}async function ye(e){let t;switch(B(e)){case"Number":case"Boolean":case"String":t=S(e.toString());break;case"Array":case"Object":t=S(JSON.stringify(e));break;case"Uint8Array":t=e;break;case"ArrayBuffer":t=new Uint8Array(e);break;default:throw new Error("Unsupported parameter type")}return Dt(t)}var Ct={tree:"40000",blob:"100644",file:"100644",exec:"100755",sym:"120000",commit:"160000"};function xr(e){let t=this[e];return{name:e,mode:Ct[t.type],hash:t.hash}}function vr(e,t){let r=e.mode===Ct.tree?e.name+"/":e.name,s=t.mode===Ct.tree?t.name+"/":t.name;return r>s?1:r<s?-1:0}async function ge(e){let t=Object.keys(e).map(xr,e).sort(vr),r=[];for(let i of t)r.push(S(`${i.mode} ${i.name}\0`),gt(i.hash));let s=await rt(r);return Dt(s,"tree")}function Tr(e){return`${Math.floor(e.getTime()/1e3)} +0000`}function me({name:e,email:t,date:r}){let s=isNaN(Date.parse(r))?r:Tr(new Date(r));return`${e} <${t}> ${s}`}async function we({treeHash:e,parentCommitHashes:t=[],message:r,author:s,committer:i}){let n;return n=t.reduce((o,a)=>`${o}
parent ${a}`,`tree ${e}`),n+=`
author ${me(s)}`,n+=`
committer ${me(i)}`,n+=`

${r?r+`
`:""}`,Dt(S(n),"commit")}var J=class e{committer;author;owner;name;authenticated;request;graphql;id;isPublic;created;async encrypt(t){return t}async decrypt(t){return t}encrypted=!1;static async instantiate(t){let r=new e(t);return await r.#s(),r}constructor({owner:t,repo:r,auth:s,encrypt:i,decrypt:n,committer:o,author:a,fetch:h}){this.owner=t,this.name=r,this.authenticated=!!s,i&&(this.encrypt=i),n&&(this.decrypt=n),(i||n)&&(this.encrypted=!0),this.committer=o??{name:"a a",email:"a@a.a",date:"2025-01-01T00:00:00Z"},this.author=a??this.committer,this.request=lt.defaults({owner:t,repo:r,headers:{Authorization:s?`Bearer ${s}`:void 0,"X-GitHub-Api-Version":"2022-11-28"},request:{fetch:h}}),this.graphql=de(this.request)}async#s(){let{node_id:t,visibility:r,created_at:s}=await this.request("GET /repos/{owner}/{repo}").then(i=>i.data);this.id=t,this.isPublic=r==="public",this.created=new Date(s).getTime()}async hasCommit(t){return this.request("HEAD /repos/{owner}/{repo}/git/commits/{commitHash}",{commitHash:t}).then(()=>!0).catch(r=>{if(r.status===404)return!1;throw new Error(`GitHub API network error: ${r.status}`,{cause:r})})}async hasRef(t){return t.startsWith("refs/")?t=t.substring(5):t=`heads/${t}`,this.request("HEAD /repos/{owner}/{repo}/git/ref/{ref}",{ref:t}).then(()=>!0).catch(r=>{if(r.status===404)return!1;throw new Error(`GitHub API network error: ${r.status}`,{cause:r})})}async commitBytes(t,{message:r="",encrypt:s=this.encrypted,paths:i=["bytes"],author:n=this.author,committer:o=this.committer,parentCommitHashes:a=[],push:h=!0}={}){let l=s?await this.encrypt(t):t,f=await ye(l),c={},u=[];for(let g of i)c[g]={type:"blob",hash:f},u.push({path:g,type:"blob",mode:"100644",sha:f});let d=await ge(c),v=await we({treeHash:d,message:r,committer:o,author:n,parentCommitHashes:a});if(!h||await this.hasCommit(v))return v;let m=Ft(l);return await this.request("POST /repos/{owner}/{repo}/git/blobs",{content:m,encoding:"base64"}),await this.request("POST /repos/{owner}/{repo}/git/trees",{tree:u}),await this.request("POST /repos/{owner}/{repo}/git/commits",{message:r,tree:d,author:n,committer:o,parents:a}).then(g=>g.data.sha)}async updateRefs([...t]){let r="0000000000000000000000000000000000000000";for(let s of t){let{name:i,beforeOid:n,afterOid:o,force:a}=s;i.startsWith("refs/")||(s.name=`refs/heads/${i}`),n===null&&(s.beforeOid=r),s.afterOid=o??r,s.force=a??!0}await this.graphql(`
    mutation($repositoryId: ID!, $refUpdates: [RefUpdate!]!) {
      updateRefs(input: { repositoryId: $repositoryId, refUpdates: $refUpdates }) {
        clientMutationId
      }
    }
  `,{repositoryId:this.id,refUpdates:t})}async refToCommitHash(t){return t.startsWith("refs/")?t=t.substring(5):t=`heads/${t}`,this.request("GET /repos/{owner}/{repo}/git/ref/{ref}",{ref:t}).then(r=>r.data.object.sha).catch(r=>{if(r.status!==404)throw r})}async fetchBlobContent(t,{decrypt:r=this.encrypted}={}){return this.request("GET /repos/{owner}/{repo}/git/blobs/{blobHash}",{blobHash:t}).then(s=>et(s.data.content)).catch(s=>{if(s.status!==404)throw s}).then(s=>r?this.decrypt(s):s)}async fetchCommitContent(t,{decrypt:r=this.encrypted,path:s="bytes"}={}){if(!this.isPublic)return this.request("GET /repos/{owner}/{repo}/contents/{path}",{path:s,ref:t}).then(i=>i.data.sha).catch(i=>{if(i.status!==404)throw i}).then(i=>this.fetchBlobContent(i,{decrypt:r}));for(let i of this.cdnLinks(t,s))try{let n=await fetch(i,{redirect:"follow"}).then(o=>{if(!o.ok)throw new Error(o.status);return o.bytes()});return r?this.decrypt(n):n}catch(n){if(n.message==="404")return;continue}throw new Error("Unexpected failure with CDNs")}async fetchCommitMessage(t){return this.request("HEAD /repos/{owner}/{repo}/git/commits/{ref}",{ref:t}).then(r=>r.data.message).catch(r=>{if(r.status!==404)throw r})}cdnLinks(t,r="bytes"){if(typeof r!="string"||r.startsWith("./"))throw new Error("Pass proper path parameter");if(!this.isPublic)return;let s=this.owner,i=this.name;return[`https://cdn.jsdelivr.net/gh/${s}/${i}@${t}/${r}`,`https://cdn.statically.io/gh/${s}/${i}/${t}/${r}`,`https://rawcdn.githack.com/${s}/${i}/${t}/${r}`,`https://esm.sh/gh/${s}/${i}@${t}/${r}`,`https://raw.githubusercontent.com/${s}/${i}/${t}/${r}`]}async listBranchesTo(t){return(await this.request("GET /repos/{owner}/{repo}/commits/{commitHash}/branches-where-head",{commitHash:t}).then(s=>s.data)).map(s=>s.name)}};var Sr=["bytes","view.txt","view.json"],ft="view.txt",z=new V,_r=z.inv;function K(e){return{bytes:`refs/heads/kv/values/${e}/bytes`,type:`refs/heads/kv/values/${e}/type`,expiry:`refs/heads/kv/expiries/${e}/dayID`,key:`refs/tags/kv/keys/${e}/key`}}function Er(e){return e.startsWith("refs/")||(e="refs/heads/"+e),e.split("/").slice(4,-1).join("/")}function Or({mimeType:e,extension:t}={}){return e&&t?`${e};extension=${t}`:e??""}function Cr(e){if(!e)return{};let[t,r]=e.split(";"),s=r?.split("=").pop();return{mimeType:t,extension:s}}var dt=class e{repository;async commitTyped(t,{encrypt:r,push:s}={}){if(t===void 0)return{};let{type:i,mimeType:n,bytes:o,extension:a}=await Wt(t),h=[...Sr];n&&a&&h.push(`view.${a}`);let l=Or({mimeType:n,extension:a}),f=await this.repository.commitBytes(o,{message:l,paths:h,encrypt:r,push:s}),c,u=r??this.repository.encrypted;return a&&u===!1&&(c=this.repository.cdnLinks(f,`view.${a}`)),{commitHash:f,type:i,cdnLinks:c}}async init(){let t=[];for(let r of bt){let{commitHash:s}=await this.commitTyped(r,{encrypt:!1});t.push({afterOid:s,name:`refs/tags/kv/types/${r}/type`})}await this.repository.updateRefs(t)}static async instantiate(t){let r=await J.instantiate(t),s=new e(r);if(z.size===0)for(let i of bt){let{commitHash:n}=await s.commitTyped(i,{encrypt:!1,push:!1});z.set(i,n)}return s}constructor(t){this.repository=t}async keyToUuid(t,{push:r=!1}={}){let{commitHash:s,type:i}=await this.commitTyped(t,{push:r});return{uuid:`${i}/${Bt(s)}`,type:i,commitHash:s}}async uuidToKey(t){let[r,s]=t.split("/"),i=Rt(s),[n,o]=await Promise.all([this.repository.fetchCommitContent(i,{path:ft}),r==="Blob"?this.repository.fetchCommitMessage(i):""]),{mimeType:a}=Cr(o);return nt({type:r,mimeType:a,bytes:n})}async create(t,r,{overwrite:s,ttl:i,oldValue:n}={}){let o,a;switch(s){case!0:o=!1;break;case!1:if(n!==void 0)throw new Error("Cannot have oldValue when overwrite: false");a=null;default:o=!0}let h,l;Number.isFinite(i)&&(h=Tt(i),l=G(h));let[{uuid:f,commitHash:c},{commitHash:u,type:d,cdnLinks:v},{commitHash:m},{commitHash:g,type:p}]=await Promise.all([this.keyToUuid(t,{push:o}),this.commitTyped(r,{push:!0}),this.commitTyped(l,{push:!0,encrypt:!1}),this.commitTyped(n,{push:!1})]);r===void 0?(c=null,m=null):s===!0&&(a=c);let w=K(f);try{return await this.repository.updateRefs([{beforeOid:a,afterOid:c,name:w.key},{beforeOid:g,afterOid:u,name:w.bytes},{beforeOid:z.get(p),afterOid:z.get(d),name:w.type},{afterOid:m,name:w.expiry}]),{uuid:f,cdnLinks:v,expiry:h}}catch(T){throw s===!1&&await this.has(t)===!0?new Error("Key exists"):s===!0&&await this.has(t)===!1?new Error("Nothing to overwrite"):d&&await this.repository.hasCommit(z.get(d))===!1?new Error("Database not initialized. Run db.init()"):new Error("Failed",{cause:T})}}async has(t){let{uuid:r}=await this.keyToUuid(t);return this.repository.hasRef(K(r).key)}async read(t){let{uuid:r}=await this.keyToUuid(t),s=K(r),i=s.bytes,n=s.type,o=s.expiry,a,h,l,f,c,u;if(this.repository.authenticated){let{bytes:g,type:p,expiry:w}=await this.repository.graphql(`
          query($id: ID!, $bytesRef: String!, $typeRef: String!, $expiryRef: String!, $path: String!) {
            node(id: $id) {
              ... on Repository {
                bytes: ref(qualifiedName: $bytesRef) {
                  target {
                    oid
                    ... on Commit {
                      message
                      file(path: $path){
                        oid
                      }
                    }
                  }
                }
                type:ref(qualifiedName: $typeRef) {
                  target {
                    oid
                  }
                }
                expiry:ref(qualifiedName: $expiryRef) {
                  target {
                    oid
                    ... on Commit {
                      file(path: $path){
                        object {
                          ... on Blob {
                            text
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        `,{id:this.repository.id,bytesRef:i,typeRef:n,expiryRef:o,path:ft}).then(T=>T.node);a=g?.target?.oid,h=g?.target?.message,l=g?.target?.file?.oid,f=p?.target?.oid,u=Number(w?.target?.file?.object?.text)}else[a,f,c]=await Promise.all([this.repository.refToCommitHash(i),this.repository.refToCommitHash(n),this.repository.refToCommitHash(o)]);if(a===void 0)return{};let d=_r.get(f);d==="Blob"&&h===void 0&&(h=await this.repository.fetchCommitMessage(a));let v=h?h.split(";")[0]:void 0,m;if(this.repository.isPublic?m=this.repository.fetchCommitContent(a,{path:ft}):m=this.repository.fetchBlobContent(l),u===void 0&&c){let g=await this.repository.fetchCommitContent(c,{decrypt:!1,path:ft});u=nt({bytes:g,type:"Number"})}return Xt(u)?{}:{value:nt({bytes:await m,type:d,mimeType:v}),expiry:u?Jt(u):void 0}}async update(t,r,{keepTtl:s=!1,ttl:i}={}){let{value:n,expiry:o}=await this.read(t),a;try{typeof n=="object"&&n!==null?a=await r(structuredClone(n)):a=await r(n)}catch(l){throw new Error('modifier() threw error. See "cause" for details.',{cause:l})}return s&&(i=Kt(o)),{...this.create(t,a,{overwrite:!0,ttl:i,oldValue:n}),oldValue:n,newValue:a}}async increment(t,r=1){let s=i=>{if(B(i)!=="Number")throw new Error("Old value must be a Number");return i+r};return this.update(t,s)}async toggle(t){let r=s=>{if(B(s)!=="Boolean")throw new Error("Old value must be a Boolean");return!s};return this.update(t,r)}async delete(t,r=void 0){return this.create(t,void 0,{oldValue:r})}async expire(t,r){let s=G(Tt(r)),[{uuid:i,commitHash:n},{commitHash:o}]=await Promise.all([this.keyToUuid(t),this.commitTyped(s,{push:!0,encrypt:!1})]),a=K(i);try{await this.repository.updateRefs([{beforeOid:n,afterOid:n,name:a.key},{afterOid:o,name:a.expiry}])}catch(h){throw await this.has(t)===!1?new Error("Nothing to expire"):new Error("Failed",{cause:h})}}async deleteUUIDs(t){let r=[];for(let s of t)Object.values(K(s)).forEach(n=>{r.push({name:n,afterOid:null})});return this.repository.updateRefs(r)}async gc(t=new Date,{batchSize:r=10}={}){let{commitHash:s}=await this.commitTyped(at(t),{encrypt:!1,push:!1});if(!await this.repository.hasCommit(s))return 0;let i=await this.repository.listBranchesTo(s),n=[];for(let o=0;o<i.length;o+=r)n.push(this.deleteUUIDs(i.slice(o,o+r).map(a=>Er(a))));return await Promise.all(n),i.length}};export{dt as default};
/*! Bundled license information:

date-and-time/esm/date-and-time.mjs:
  (**
   * @preserve date-and-time (c) KNOWLEDGECODE | MIT
   *)
*/
