var Ne=Object.create;var vt=Object.defineProperty;var He=Object.getOwnPropertyDescriptor;var Ie=Object.getOwnPropertyNames;var We=Object.getPrototypeOf,Le=Object.prototype.hasOwnProperty;var qe=(i,t)=>()=>(i&&(t=i(i=0)),t);var Pe=(i,t)=>()=>(t||i((t={exports:{}}).exports,t),t.exports),Ge=(i,t)=>{for(var e in t)vt(i,e,{get:t[e],enumerable:!0})},ke=(i,t,e,s)=>{if(t&&typeof t=="object"||typeof t=="function")for(let r of Ie(t))!Le.call(i,r)&&r!==e&&vt(i,r,{get:()=>t[r],enumerable:!(s=He(t,r))||s.enumerable});return i};var Ve=(i,t,e)=>(e=i!=null?Ne(We(i)):{},ke(t||!i||!i.__esModule?vt(e,"default",{value:i,enumerable:!0}):e,i));var ie={};Ge(ie,{LRUCache:()=>ci});var N,Xt,Et,Qt,ut,Kt,ai,is,F,te,lt,hi,ci,se=qe(()=>{N=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,Xt=new Set,Et=typeof process=="object"&&process?process:{},Qt=(i,t,e,s)=>{typeof Et.emitWarning=="function"?Et.emitWarning(i,t,e,s):console.error(`[${e}] ${t}: ${i}`)},ut=globalThis.AbortController,Kt=globalThis.AbortSignal;if(typeof ut>"u"){Kt=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(e,s){this._onabort.push(s)}},ut=class{constructor(){t()}signal=new Kt;abort(e){if(!this.signal.aborted){this.signal.reason=e,this.signal.aborted=!0;for(let s of this.signal._onabort)s(e);this.signal.onabort?.(e)}}};let i=Et.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{i&&(i=!1,Qt("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}ai=i=>!Xt.has(i),is=Symbol("type"),F=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),te=i=>F(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?lt:null:null,lt=class extends Array{constructor(i){super(i),this.fill(0)}},hi=class Z{heap;length;static#a=!1;static create(t){let e=te(t);if(!e)return[];Z.#a=!0;let s=new Z(t,e);return Z.#a=!1,s}constructor(t,e){if(!Z.#a)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},ci=class ee{#a;#u;#y;#O;#m;#U;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#r;#g;#s;#i;#t;#c;#f;#h;#n;#w;#o;#b;#x;#d;#T;#E;#l;#M;static unsafeExposeInternals(t){return{starts:t.#x,ttls:t.#d,sizes:t.#b,keyMap:t.#s,keyList:t.#i,valList:t.#t,next:t.#c,prev:t.#f,get head(){return t.#h},get tail(){return t.#n},free:t.#w,isBackgroundFetch:e=>t.#e(e),backgroundFetch:(e,s,r,n)=>t.#j(e,s,r,n),moveToTail:e=>t.#F(e),indexes:e=>t.#v(e),rindexes:e=>t.#S(e),isStale:e=>t.#p(e)}}get max(){return this.#a}get maxSize(){return this.#u}get calculatedSize(){return this.#g}get size(){return this.#r}get fetchMethod(){return this.#U}get memoMethod(){return this.#R}get dispose(){return this.#y}get onInsert(){return this.#O}get disposeAfter(){return this.#m}constructor(t){let{max:e=0,ttl:s,ttlResolution:r=1,ttlAutopurge:n,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:h,dispose:u,onInsert:f,disposeAfter:c,noDisposeOnSet:l,noUpdateTTL:p,maxSize:b=0,maxEntrySize:y=0,sizeCalculation:w,fetchMethod:d,memoMethod:m,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:g,allowStaleOnFetchRejection:T,allowStaleOnFetchAbort:O,ignoreFetchAbort:A}=t;if(e!==0&&!F(e))throw new TypeError("max option must be a nonnegative integer");let C=e?te(e):Array;if(!C)throw new Error("invalid max value: "+e);if(this.#a=e,this.#u=b,this.maxEntrySize=y||this.#u,this.sizeCalculation=w,this.sizeCalculation){if(!this.#u&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(m!==void 0&&typeof m!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=m,d!==void 0&&typeof d!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#U=d,this.#E=!!d,this.#s=new Map,this.#i=new Array(e).fill(void 0),this.#t=new Array(e).fill(void 0),this.#c=new C(e),this.#f=new C(e),this.#h=0,this.#n=0,this.#w=hi.create(e),this.#r=0,this.#g=0,typeof u=="function"&&(this.#y=u),typeof f=="function"&&(this.#O=f),typeof c=="function"?(this.#m=c,this.#o=[]):(this.#m=void 0,this.#o=void 0),this.#T=!!this.#y,this.#M=!!this.#O,this.#l=!!this.#m,this.noDisposeOnSet=!!l,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!T,this.allowStaleOnFetchAbort=!!O,this.ignoreFetchAbort=!!A,this.maxEntrySize!==0){if(this.#u!==0&&!F(this.#u))throw new TypeError("maxSize must be a positive integer if specified");if(!F(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#q()}if(this.allowStale=!!h,this.noDeleteOnStaleGet=!!g,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=F(r)||r===0?r:1,this.ttlAutopurge=!!n,this.ttl=s||0,this.ttl){if(!F(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#B()}if(this.#a===0&&this.ttl===0&&this.#u===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#a&&!this.#u){let _="LRU_CACHE_UNBOUNDED";ai(_)&&(Xt.add(_),Qt("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",_,ee))}}getRemainingTTL(t){return this.#s.has(t)?1/0:0}#B(){let t=new lt(this.#a),e=new lt(this.#a);this.#d=t,this.#x=e,this.#N=(n,o,a=N.now())=>{if(e[n]=o!==0?a:0,t[n]=o,o!==0&&this.ttlAutopurge){let h=setTimeout(()=>{this.#p(n)&&this.#A(this.#i[n],"expire")},o+1);h.unref&&h.unref()}},this.#C=n=>{e[n]=t[n]!==0?N.now():0},this.#_=(n,o)=>{if(t[o]){let a=t[o],h=e[o];if(!a||!h)return;n.ttl=a,n.start=h,n.now=s||r();let u=n.now-h;n.remainingTTL=a-u}};let s=0,r=()=>{let n=N.now();if(this.ttlResolution>0){s=n;let o=setTimeout(()=>s=0,this.ttlResolution);o.unref&&o.unref()}return n};this.getRemainingTTL=n=>{let o=this.#s.get(n);if(o===void 0)return 0;let a=t[o],h=e[o];if(!a||!h)return 1/0;let u=(s||r())-h;return a-u},this.#p=n=>{let o=e[n],a=t[n];return!!a&&!!o&&(s||r())-o>a}}#C=()=>{};#_=()=>{};#N=()=>{};#p=()=>!1;#q(){let t=new lt(this.#a);this.#g=0,this.#b=t,this.#D=e=>{this.#g-=t[e],t[e]=0},this.#H=(e,s,r,n)=>{if(this.#e(s))return 0;if(!F(r))if(n){if(typeof n!="function")throw new TypeError("sizeCalculation must be a function");if(r=n(s,e),!F(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return r},this.#$=(e,s,r)=>{if(t[e]=s,this.#u){let n=this.#u-t[e];for(;this.#g>n;)this.#z(!0)}this.#g+=t[e],r&&(r.entrySize=s,r.totalCalculatedSize=this.#g)}}#D=t=>{};#$=(t,e,s)=>{};#H=(t,e,s,r)=>{if(s||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#v({allowStale:t=this.allowStale}={}){if(this.#r)for(let e=this.#n;!(!this.#I(e)||((t||!this.#p(e))&&(yield e),e===this.#h));)e=this.#f[e]}*#S({allowStale:t=this.allowStale}={}){if(this.#r)for(let e=this.#h;!(!this.#I(e)||((t||!this.#p(e))&&(yield e),e===this.#n));)e=this.#c[e]}#I(t){return t!==void 0&&this.#s.get(this.#i[t])===t}*entries(){for(let t of this.#v())this.#t[t]!==void 0&&this.#i[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#i[t],this.#t[t]])}*rentries(){for(let t of this.#S())this.#t[t]!==void 0&&this.#i[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#i[t],this.#t[t]])}*keys(){for(let t of this.#v()){let e=this.#i[t];e!==void 0&&!this.#e(this.#t[t])&&(yield e)}}*rkeys(){for(let t of this.#S()){let e=this.#i[t];e!==void 0&&!this.#e(this.#t[t])&&(yield e)}}*values(){for(let t of this.#v())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}*rvalues(){for(let t of this.#S())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(let s of this.#v()){let r=this.#t[s],n=this.#e(r)?r.__staleWhileFetching:r;if(n!==void 0&&t(n,this.#i[s],this))return this.get(this.#i[s],e)}}forEach(t,e=this){for(let s of this.#v()){let r=this.#t[s],n=this.#e(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(e,n,this.#i[s],this)}}rforEach(t,e=this){for(let s of this.#S()){let r=this.#t[s],n=this.#e(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(e,n,this.#i[s],this)}}purgeStale(){let t=!1;for(let e of this.#S({allowStale:!0}))this.#p(e)&&(this.#A(this.#i[e],"expire"),t=!0);return t}info(t){let e=this.#s.get(t);if(e===void 0)return;let s=this.#t[e],r=this.#e(s)?s.__staleWhileFetching:s;if(r===void 0)return;let n={value:r};if(this.#d&&this.#x){let o=this.#d[e],a=this.#x[e];if(o&&a){let h=o-(N.now()-a);n.ttl=h,n.start=Date.now()}}return this.#b&&(n.size=this.#b[e]),n}dump(){let t=[];for(let e of this.#v({allowStale:!0})){let s=this.#i[e],r=this.#t[e],n=this.#e(r)?r.__staleWhileFetching:r;if(n===void 0||s===void 0)continue;let o={value:n};if(this.#d&&this.#x){o.ttl=this.#d[e];let a=N.now()-this.#x[e];o.start=Math.floor(Date.now()-a)}this.#b&&(o.size=this.#b[e]),t.unshift([s,o])}return t}load(t){this.clear();for(let[e,s]of t){if(s.start){let r=Date.now()-s.start;s.start=N.now()-r}this.set(e,s.value,s)}}set(t,e,s={}){if(e===void 0)return this.delete(t),this;let{ttl:r=this.ttl,start:n,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:h}=s,{noUpdateTTL:u=this.noUpdateTTL}=s,f=this.#H(t,e,s.size||0,a);if(this.maxEntrySize&&f>this.maxEntrySize)return h&&(h.set="miss",h.maxEntrySizeExceeded=!0),this.#A(t,"set"),this;let c=this.#r===0?void 0:this.#s.get(t);if(c===void 0)c=this.#r===0?this.#n:this.#w.length!==0?this.#w.pop():this.#r===this.#a?this.#z(!1):this.#r,this.#i[c]=t,this.#t[c]=e,this.#s.set(t,c),this.#c[this.#n]=c,this.#f[c]=this.#n,this.#n=c,this.#r++,this.#$(c,f,h),h&&(h.set="add"),u=!1,this.#M&&this.#O?.(e,t,"add");else{this.#F(c);let l=this.#t[c];if(e!==l){if(this.#E&&this.#e(l)){l.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:p}=l;p!==void 0&&!o&&(this.#T&&this.#y?.(p,t,"set"),this.#l&&this.#o?.push([p,t,"set"]))}else o||(this.#T&&this.#y?.(l,t,"set"),this.#l&&this.#o?.push([l,t,"set"]));if(this.#D(c),this.#$(c,f,h),this.#t[c]=e,h){h.set="replace";let p=l&&this.#e(l)?l.__staleWhileFetching:l;p!==void 0&&(h.oldValue=p)}}else h&&(h.set="update");this.#M&&this.onInsert?.(e,t,e===l?"update":"replace")}if(r!==0&&!this.#d&&this.#B(),this.#d&&(u||this.#N(c,r,n),h&&this.#_(h,c)),!o&&this.#l&&this.#o){let l=this.#o,p;for(;p=l?.shift();)this.#m?.(...p)}return this}pop(){try{for(;this.#r;){let t=this.#t[this.#h];if(this.#z(!0),this.#e(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#l&&this.#o){let t=this.#o,e;for(;e=t?.shift();)this.#m?.(...e)}}}#z(t){let e=this.#h,s=this.#i[e],r=this.#t[e];return this.#E&&this.#e(r)?r.__abortController.abort(new Error("evicted")):(this.#T||this.#l)&&(this.#T&&this.#y?.(r,s,"evict"),this.#l&&this.#o?.push([r,s,"evict"])),this.#D(e),t&&(this.#i[e]=void 0,this.#t[e]=void 0,this.#w.push(e)),this.#r===1?(this.#h=this.#n=0,this.#w.length=0):this.#h=this.#c[e],this.#s.delete(s),this.#r--,e}has(t,e={}){let{updateAgeOnHas:s=this.updateAgeOnHas,status:r}=e,n=this.#s.get(t);if(n!==void 0){let o=this.#t[n];if(this.#e(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#p(n))r&&(r.has="stale",this.#_(r,n));else return s&&this.#C(n),r&&(r.has="hit",this.#_(r,n)),!0}else r&&(r.has="miss");return!1}peek(t,e={}){let{allowStale:s=this.allowStale}=e,r=this.#s.get(t);if(r===void 0||!s&&this.#p(r))return;let n=this.#t[r];return this.#e(n)?n.__staleWhileFetching:n}#j(t,e,s,r){let n=e===void 0?void 0:this.#t[e];if(this.#e(n))return n;let o=new ut,{signal:a}=s;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let h={signal:o.signal,options:s,context:r},u=(y,w=!1)=>{let{aborted:d}=o.signal,m=s.ignoreFetchAbort&&y!==void 0;if(s.status&&(d&&!w?(s.status.fetchAborted=!0,s.status.fetchError=o.signal.reason,m&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),d&&!m&&!w)return c(o.signal.reason);let v=p;return this.#t[e]===p&&(y===void 0?v.__staleWhileFetching?this.#t[e]=v.__staleWhileFetching:this.#A(t,"fetch"):(s.status&&(s.status.fetchUpdated=!0),this.set(t,y,h.options))),y},f=y=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=y),c(y)),c=y=>{let{aborted:w}=o.signal,d=w&&s.allowStaleOnFetchAbort,m=d||s.allowStaleOnFetchRejection,v=m||s.noDeleteOnFetchRejection,g=p;if(this.#t[e]===p&&(!v||g.__staleWhileFetching===void 0?this.#A(t,"fetch"):d||(this.#t[e]=g.__staleWhileFetching)),m)return s.status&&g.__staleWhileFetching!==void 0&&(s.status.returnedStale=!0),g.__staleWhileFetching;if(g.__returned===g)throw y},l=(y,w)=>{let d=this.#U?.(t,n,h);d&&d instanceof Promise&&d.then(m=>y(m===void 0?void 0:m),w),o.signal.addEventListener("abort",()=>{(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort)&&(y(void 0),s.allowStaleOnFetchAbort&&(y=m=>u(m,!0)))})};s.status&&(s.status.fetchDispatched=!0);let p=new Promise(l).then(u,f),b=Object.assign(p,{__abortController:o,__staleWhileFetching:n,__returned:void 0});return e===void 0?(this.set(t,b,{...h.options,status:void 0}),e=this.#s.get(t)):this.#t[e]=b,b}#e(t){if(!this.#E)return!1;let e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof ut}async fetch(t,e={}){let{allowStale:s=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:h=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:f=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:l=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:y,forceRefresh:w=!1,status:d,signal:m}=e;if(!this.#E)return d&&(d.fetch="get"),this.get(t,{allowStale:s,updateAgeOnGet:r,noDeleteOnStaleGet:n,status:d});let v={allowStale:s,updateAgeOnGet:r,noDeleteOnStaleGet:n,ttl:o,noDisposeOnSet:a,size:h,sizeCalculation:u,noUpdateTTL:f,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:l,allowStaleOnFetchAbort:b,ignoreFetchAbort:p,status:d,signal:m},g=this.#s.get(t);if(g===void 0){d&&(d.fetch="miss");let T=this.#j(t,g,v,y);return T.__returned=T}else{let T=this.#t[g];if(this.#e(T)){let _=s&&T.__staleWhileFetching!==void 0;return d&&(d.fetch="inflight",_&&(d.returnedStale=!0)),_?T.__staleWhileFetching:T.__returned=T}let O=this.#p(g);if(!w&&!O)return d&&(d.fetch="hit"),this.#F(g),r&&this.#C(g),d&&this.#_(d,g),T;let A=this.#j(t,g,v,y),C=A.__staleWhileFetching!==void 0&&s;return d&&(d.fetch=O?"stale":"refresh",C&&O&&(d.returnedStale=!0)),C?A.__staleWhileFetching:A.__returned=A}}async forceFetch(t,e={}){let s=await this.fetch(t,e);if(s===void 0)throw new Error("fetch() returned undefined");return s}memo(t,e={}){let s=this.#R;if(!s)throw new Error("no memoMethod provided to constructor");let{context:r,forceRefresh:n,...o}=e,a=this.get(t,o);if(!n&&a!==void 0)return a;let h=s(t,a,{options:o,context:r});return this.set(t,h,o),h}get(t,e={}){let{allowStale:s=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,status:o}=e,a=this.#s.get(t);if(a!==void 0){let h=this.#t[a],u=this.#e(h);return o&&this.#_(o,a),this.#p(a)?(o&&(o.get="stale"),u?(o&&s&&h.__staleWhileFetching!==void 0&&(o.returnedStale=!0),s?h.__staleWhileFetching:void 0):(n||this.#A(t,"expire"),o&&s&&(o.returnedStale=!0),s?h:void 0)):(o&&(o.get="hit"),u?h.__staleWhileFetching:(this.#F(a),r&&this.#C(a),h))}else o&&(o.get="miss")}#W(t,e){this.#f[e]=t,this.#c[t]=e}#F(t){t!==this.#n&&(t===this.#h?this.#h=this.#c[t]:this.#W(this.#f[t],this.#c[t]),this.#W(this.#n,t),this.#n=t)}delete(t){return this.#A(t,"delete")}#A(t,e){let s=!1;if(this.#r!==0){let r=this.#s.get(t);if(r!==void 0)if(s=!0,this.#r===1)this.#L(e);else{this.#D(r);let n=this.#t[r];if(this.#e(n)?n.__abortController.abort(new Error("deleted")):(this.#T||this.#l)&&(this.#T&&this.#y?.(n,t,e),this.#l&&this.#o?.push([n,t,e])),this.#s.delete(t),this.#i[r]=void 0,this.#t[r]=void 0,r===this.#n)this.#n=this.#f[r];else if(r===this.#h)this.#h=this.#c[r];else{let o=this.#f[r];this.#c[o]=this.#c[r];let a=this.#c[r];this.#f[a]=this.#f[r]}this.#r--,this.#w.push(r)}}if(this.#l&&this.#o?.length){let r=this.#o,n;for(;n=r?.shift();)this.#m?.(...n)}return s}clear(){return this.#L("delete")}#L(t){for(let e of this.#S({allowStale:!0})){let s=this.#t[e];if(this.#e(s))s.__abortController.abort(new Error("deleted"));else{let r=this.#i[e];this.#T&&this.#y?.(s,r,t),this.#l&&this.#o?.push([s,r,t])}}if(this.#s.clear(),this.#t.fill(void 0),this.#i.fill(void 0),this.#d&&this.#x&&(this.#d.fill(0),this.#x.fill(0)),this.#b&&this.#b.fill(0),this.#h=0,this.#n=0,this.#w.length=0,this.#g=0,this.#r=0,this.#l&&this.#o){let e=this.#o,s;for(;s=e?.shift();)this.#m?.(...s)}}}});var _e=Pe((ys,et)=>{"use strict";var gt=function(){};gt.prototype=Object.create(null);var yt=/; *([!#$%&'*+.^\w`|~-]+)=("(?:[\v\u0020\u0021\u0023-\u005b\u005d-\u007e\u0080-\u00ff]|\\[\v\u0020-\u00ff])*"|[!#$%&'*+.^\w`|~-]+) */gu,mt=/\\([\v\u0020-\u00ff])/gu,ve=/^[!#$%&'*+.^\w|~-]+\/[!#$%&'*+.^\w|~-]+$/u,j={type:"",parameters:new gt};Object.freeze(j.parameters);Object.freeze(j);function Se(i){if(typeof i!="string")throw new TypeError("argument header is required and must be a string");let t=i.indexOf(";"),e=t!==-1?i.slice(0,t).trim():i.trim();if(ve.test(e)===!1)throw new TypeError("invalid media type");let s={type:e.toLowerCase(),parameters:new gt};if(t===-1)return s;let r,n,o;for(yt.lastIndex=t;n=yt.exec(i);){if(n.index!==t)throw new TypeError("invalid parameter format");t+=n[0].length,r=n[1].toLowerCase(),o=n[2],o[0]==='"'&&(o=o.slice(1,o.length-1),mt.test(o)&&(o=o.replace(mt,"$1"))),s.parameters[r]=o}if(t!==i.length)throw new TypeError("invalid parameter format");return s}function Ae(i){if(typeof i!="string")return j;let t=i.indexOf(";"),e=t!==-1?i.slice(0,t).trim():i.trim();if(ve.test(e)===!1)return j;let s={type:e.toLowerCase(),parameters:new gt};if(t===-1)return s;let r,n,o;for(yt.lastIndex=t;n=yt.exec(i);){if(n.index!==t)return j;t+=n[0].length,r=n[1].toLowerCase(),o=n[2],o[0]==='"'&&(o=o.slice(1,o.length-1),mt.test(o)&&(o=o.replace(mt,"$1"))),s.parameters[r]=o}return t!==i.length?j:s}et.exports.default={parse:Se,safeParse:Ae};et.exports.parse=Se;et.exports.safeParse=Ae;et.exports.defaultContentType=j});var Lt="Any random string that the user will never use as first parameter in class constructor :=)",D=class{static isAsync=!0;static async instantiate(...t){let e=new this(Lt);return await this.constructor.bind(e)(...t),e}constructor(t){if(t===Lt)return;let e=this.constructor.name;throw new TypeError(`Instantiate with 'await ${e}.instantiate()' instead of 'new ${e}()'`,{cause:"async constructor"})}};var ht=typeof Buffer=="function",Xi=typeof TextDecoder=="function"?new TextDecoder:void 0,Qi=typeof TextEncoder=="function"?new TextEncoder:void 0,Ye="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",k=Array.prototype.slice.call(Ye),ot=(i=>{let t={};return i.forEach((e,s)=>t[e]=s),t})(k),Ze=/^(?:[A-Za-z\d+\/]{4})*?(?:[A-Za-z\d+\/]{2}(?:==)?|[A-Za-z\d+\/]{3}=?)?$/,at=String.fromCharCode.bind(String),qt=typeof Uint8Array.from=="function"?Uint8Array.from.bind(Uint8Array):i=>new Uint8Array(Array.prototype.slice.call(i,0)),Je=i=>i.replace(/=/g,"").replace(/[+\/]/g,t=>t=="+"?"-":"_"),Gt=i=>i.replace(/[^A-Za-z0-9\+\/]/g,""),Ke=i=>{let t,e,s,r,n="",o=i.length%3;for(let a=0;a<i.length;){if((e=i.charCodeAt(a++))>255||(s=i.charCodeAt(a++))>255||(r=i.charCodeAt(a++))>255)throw new TypeError("invalid character found");t=e<<16|s<<8|r,n+=k[t>>18&63]+k[t>>12&63]+k[t>>6&63]+k[t&63]}return o?n.slice(0,o-3)+"===".substring(o):n},Xe=typeof btoa=="function"?i=>btoa(i):ht?i=>Buffer.from(i,"binary").toString("base64"):Ke,Pt=ht?i=>Buffer.from(i).toString("base64"):i=>{let e=[];for(let s=0,r=i.length;s<r;s+=4096)e.push(at.apply(null,i.subarray(s,s+4096)));return Xe(e.join(""))},St=(i,t=!1)=>t?Je(Pt(i)):Pt(i);var Qe=i=>{if(i=i.replace(/\s+/g,""),!Ze.test(i))throw new TypeError("malformed base64.");i+="==".slice(2-(i.length&3));let t,e="",s,r;for(let n=0;n<i.length;)t=ot[i.charAt(n++)]<<18|ot[i.charAt(n++)]<<12|(s=ot[i.charAt(n++)])<<6|(r=ot[i.charAt(n++)]),e+=s===64?at(t>>16&255):r===64?at(t>>16&255,t>>8&255):at(t>>16&255,t>>8&255,t&255);return e},ti=typeof atob=="function"?i=>atob(Gt(i)):ht?i=>Buffer.from(i,"base64").toString("binary"):Qe,ei=ht?i=>qt(Buffer.from(i,"base64")):i=>qt(ti(i).split("").map(t=>t.charCodeAt(0))),ct=i=>ei(ii(i));var ii=i=>Gt(i.replace(/[-_]/g,t=>t=="-"?"+":"/"));function kt(i){return St(i)}function si(i){return St(i,!0)}var ri=new TextEncoder,ni=new TextDecoder;function E(i){return ri.encode(i)}function V(i){return ni.decode(i)}function At(i){return Array.from(i).map(t=>t.toString(16).padStart(2,"0")).join("")}function _t(i){let t=i.length;if(t%2!==0)throw new Error("Number of provided nibbles must be even");let e=[];for(let s=0;s<t;s+=2)e.push(parseInt(i[s]+i[s+1],16));return Uint8Array.from(e)}function Vt(i){return si(_t(i))}function Yt(i){return At(ct(i))}function Zt(i){return new Uint8Array(new Float64Array([i]).buffer)}function Jt(i){return new Float64Array(i.buffer)[0]}async function Y([...i]){return new Uint8Array(await new Blob(i).arrayBuffer())}var J=class i{static mimeDbCdnVersion="4.0.0-1.54.0";static cdnBase=`https://cdn.jsdelivr.net/npm/mime-db-cdn@${i.mimeDbCdnVersion}`;cache;#a={};async fetch(...t){return globalThis.fetch(...t)}constructor({fetch:t,cacheMaxEntries:e}={}){t&&(this.fetch=t),e&&(this.#a.max=e)}async#u(){if(this.cache===void 0&&Object.keys(this.#a).length!==0){let{LRUCache:t}=await Promise.resolve().then(()=>(se(),ie));this.cache=new t(this.#a)}return this.cache}async query(t){let e=i.cdnBase+`/mime-types/${t}/data.json`;return this.fetch(e).then(s=>{if(s.status===404)throw new Error("Not Found");return s.json()})}async mimeToExtensions(t){let[e]=t.split(";"),s=await this.#u(),r=s?.get(e);return r===void 0&&({extensions:r}=await this.query(e),s?.set(e,r)),r??[]}getExtensions=this.mimeToExtensions;async extensionToMimes(t){let e=t.split("/").pop().split(".").pop(),s=await this.#u(),r=s?.get(e);if(r===void 0){let n=i.cdnBase+`/extensions/${e}/data.json`;({mimeTypes:r}=await this.fetch(n).then(o=>{if(o.status===404)throw new Error("Not Found");return o.json()})),s?.set(e,r)}return r??[]}getTypes=this.extensionToMimes;async extensionToMime(t){let[e,...s]=await this.getTypes(t);return e}getType=this.extensionToMime};var li=new J({cacheMaxEntries:32}),Ot=["Number","Boolean","String","JSON","Blob","ArrayBuffer"];function M(i){return Object.prototype.toString.call(i).split(" ").pop().slice(0,-1)}async function re(i){let t=M(i);switch(t){case"Number":if(i.toString().length>7)return{type:t,bytes:Zt(i)};case"Boolean":case"String":return{type:t,bytes:E(i.toString()),extension:"txt"};case"Null":case"Array":case"Object":return{type:"JSON",bytes:E(JSON.stringify(i)),extension:"json"};case"Blob":let e=new Uint8Array(await i.arrayBuffer()),s=i.type,[r]=await li.getExtensions(s).catch(()=>[]);return{type:t,mimeType:s,bytes:e,extension:r};case"Uint8Array":return{bytes:i};case"ArrayBuffer":return{type:t,bytes:new Uint8Array(i)};default:throw new TypeError(`Unsupported JavaScript type: ${t}`)}}function ne({type:i="Uint8Array",mimeType:t,bytes:e}){switch(i){case"Number":return e.length===8?Jt(e):Number(V(e));case"Boolean":return V(e)==="true";case"String":return V(e);case"JSON":return JSON.parse(V(e));case"Blob":return new Blob([e],{type:t});case"ArrayBuffer":return e.buffer;case"Uint8Array":return e;default:throw new TypeError(`Unsupported storage type: ${i}`)}}var Ct={},K={},ft="en",Dt={MMMM:["January","February","March","April","May","June","July","August","September","October","November","December"],MMM:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dddd:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ddd:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dd:["Su","Mo","Tu","We","Th","Fr","Sa"],A:["AM","PM"]},oe={YYYY:function(i){return("000"+i.getFullYear()).slice(-4)},YY:function(i){return("0"+i.getFullYear()).slice(-2)},Y:function(i){return""+i.getFullYear()},MMMM:function(i){return this.res.MMMM[i.getMonth()]},MMM:function(i){return this.res.MMM[i.getMonth()]},MM:function(i){return("0"+(i.getMonth()+1)).slice(-2)},M:function(i){return""+(i.getMonth()+1)},DD:function(i){return("0"+i.getDate()).slice(-2)},D:function(i){return""+i.getDate()},HH:function(i){return("0"+i.getHours()).slice(-2)},H:function(i){return""+i.getHours()},A:function(i){return this.res.A[i.getHours()>11|0]},hh:function(i){return("0"+(i.getHours()%12||12)).slice(-2)},h:function(i){return""+(i.getHours()%12||12)},mm:function(i){return("0"+i.getMinutes()).slice(-2)},m:function(i){return""+i.getMinutes()},ss:function(i){return("0"+i.getSeconds()).slice(-2)},s:function(i){return""+i.getSeconds()},SSS:function(i){return("00"+i.getMilliseconds()).slice(-3)},SS:function(i){return("0"+(i.getMilliseconds()/10|0)).slice(-2)},S:function(i){return""+(i.getMilliseconds()/100|0)},dddd:function(i){return this.res.dddd[i.getDay()]},ddd:function(i){return this.res.ddd[i.getDay()]},dd:function(i){return this.res.dd[i.getDay()]},Z:function(i){var t=i.getTimezoneOffset()/.6|0;return(t>0?"-":"+")+("000"+Math.abs(t-(t%100*.4|0))).slice(-4)},ZZ:function(i){var t=i.getTimezoneOffset(),e=Math.abs(t);return(t>0?"-":"+")+("0"+(e/60|0)).slice(-2)+":"+("0"+e%60).slice(-2)},post:function(i){return i},res:Dt},ae={YYYY:function(i){return this.exec(/^\d{4}/,i)},Y:function(i){return this.exec(/^\d{1,4}/,i)},MMMM:function(i){var t=this.find(this.res.MMMM,i);return t.value++,t},MMM:function(i){var t=this.find(this.res.MMM,i);return t.value++,t},MM:function(i){return this.exec(/^\d\d/,i)},M:function(i){return this.exec(/^\d\d?/,i)},DD:function(i){return this.exec(/^\d\d/,i)},D:function(i){return this.exec(/^\d\d?/,i)},HH:function(i){return this.exec(/^\d\d/,i)},H:function(i){return this.exec(/^\d\d?/,i)},A:function(i){return this.find(this.res.A,i)},hh:function(i){return this.exec(/^\d\d/,i)},h:function(i){return this.exec(/^\d\d?/,i)},mm:function(i){return this.exec(/^\d\d/,i)},m:function(i){return this.exec(/^\d\d?/,i)},ss:function(i){return this.exec(/^\d\d/,i)},s:function(i){return this.exec(/^\d\d?/,i)},SSS:function(i){return this.exec(/^\d{1,3}/,i)},SS:function(i){var t=this.exec(/^\d\d?/,i);return t.value*=10,t},S:function(i){var t=this.exec(/^\d/,i);return t.value*=100,t},Z:function(i){var t=this.exec(/^[+-]\d{2}[0-5]\d/,i);return t.value=(t.value/100|0)*-60-t.value%100,t},ZZ:function(i){var t=/^([+-])(\d{2}):([0-5]\d)/.exec(i)||["","","",""];return{value:0-((t[1]+t[2]|0)*60+(t[1]+t[3]|0)),length:t[0].length}},h12:function(i,t){return(i===12?0:i)+t*12},exec:function(i,t){var e=(i.exec(t)||[""])[0];return{value:e|0,length:e.length}},find:function(i,t){for(var e=-1,s=0,r=0,n=i.length,o;r<n;r++)o=i[r],!t.indexOf(o)&&o.length>s&&(e=r,s=o.length);return{value:e,length:s}},pre:function(i){return i},res:Dt},$=function(i,t,e,s){var r={},n;for(n in i)r[n]=i[n];for(n in t||{})!!e^!!r[n]||(r[n]=t[n]);return s&&(r.res=s),r},S={_formatter:oe,_parser:ae},x;S.compile=function(i){return[i].concat(i.match(/\[(?:[^[\]]|\[[^[\]]*])*]|([A-Za-z])\1*|\.{3}|./g)||[])};S.format=function(i,t,e){for(var s=this||x,r=typeof t=="string"?s.compile(t):t,n=s._formatter,o=function(){if(e){var l=new Date(i.getTime());return l.getFullYear=l.getUTCFullYear,l.getMonth=l.getUTCMonth,l.getDate=l.getUTCDate,l.getHours=l.getUTCHours,l.getMinutes=l.getUTCMinutes,l.getSeconds=l.getUTCSeconds,l.getMilliseconds=l.getUTCMilliseconds,l.getDay=l.getUTCDay,l.getTimezoneOffset=function(){return 0},l.getTimezoneName=function(){return"UTC"},l}return i}(),a=/^\[(.*)\]$/,h="",u=1,f=r.length,c;u<f;u++)c=r[u],h+=n[c]?n.post(n[c](o,r[0])):a.test(c)?c.replace(a,"$1"):c;return h};S.preparse=function(i,t){var e=this||x,s=typeof t=="string"?e.compile(t):t,r=e._parser,n={Y:1970,M:1,D:1,H:0,A:0,h:0,m:0,s:0,S:0,Z:0,_index:0,_length:0,_match:0},o=" ",a=/^\[(.*)\]$/,h="...";i=r.pre(i);for(var u=1,f=s.length,c,l,p;u<f;u++)if(c=s[u],l=i.substring(n._index),r[c]){if(p=r[c](l,s[0]),!p.length)break;n[p.token||c.charAt(0)]=p.value,n._index+=p.length,n._match++}else if(c===l.charAt(0)||c===o)n._index++;else if(a.test(c)&&!l.indexOf(c.replace(a,"$1")))n._index+=c.length-2;else if(c===h){n._index=i.length;break}else break;return n.H=n.H||r.h12(n.h,n.A),n._length=i.length,n};S.parse=function(i,t,e){var s=this||x,r=typeof t=="string"?s.compile(t):t,n=s.preparse(i,r);return s.isValid(n)?(n.M-=n.Y<100?22801:1,e||~s._parser.find(r,"ZZ").value?new Date(Date.UTC(n.Y,n.M,n.D,n.H,n.m+n.Z,n.s,n.S)):new Date(n.Y,n.M,n.D,n.H,n.m,n.s,n.S)):new Date(NaN)};S.isValid=function(i,t){var e=this||x,s=typeof i=="string"?e.preparse(i,t):i;return!(s._index<1||s._length<1||s._index-s._length||s._match<1||s.Y<1||s.Y>9999||s.M<1||s.M>12||s.D<1||s.D>new Date(s.Y,s.M,0).getDate()||s.H<0||s.H>23||s.m<0||s.m>59||s.s<0||s.s>59||s.S<0||s.S>999||s.Z<-840||s.Z>720)};S.transform=function(i,t,e,s){let r=this||x;return r.format(r.parse(i,t),e,s)};S.addYears=function(i,t,e){return(this||x).addMonths(i,t*12,e)};S.addMonths=function(i,t,e){var s=new Date(i.getTime());if(e){if(s.setUTCMonth(s.getUTCMonth()+t),s.getUTCDate()<i.getUTCDate())return s.setUTCDate(0),s}else if(s.setMonth(s.getMonth()+t),s.getDate()<i.getDate())return s.setDate(0),s;return s};S.addDays=function(i,t,e){var s=new Date(i.getTime());return e?s.setUTCDate(s.getUTCDate()+t):s.setDate(s.getDate()+t),s};S.addHours=function(i,t){return new Date(i.getTime()+t*60*60*1e3)};S.addMinutes=function(i,t){return new Date(i.getTime()+t*60*1e3)};S.addSeconds=function(i,t){return new Date(i.getTime()+t*1e3)};S.addMilliseconds=function(i,t){return new Date(i.getTime()+t)};S.subtract=function(i,t){var e=i.getTime()-t.getTime();return{toMilliseconds:function(){return e},toSeconds:function(){return e/1e3},toMinutes:function(){return e/6e4},toHours:function(){return e/36e5},toDays:function(){return e/864e5}}};S.isLeapYear=function(i){return!(i%4)&&!!(i%100)||!(i%400)};S.isSameDay=function(i,t){return i.toDateString()===t.toDateString()};S.locale=function(i,t){Ct[i]||(Ct[i]=t)};S.plugin=function(i,t){K[i]||(K[i]=t)};x=$(S);x.locale=function(i){var t=typeof i=="function"?i:x.locale[i];if(!t)return ft;ft=t(S);var e=Ct[ft]||{},s=$(Dt,e.res,!0),r=$(oe,e.formatter,!0,s),n=$(ae,e.parser,!0,s);x._formatter=r,x._parser=n;for(var o in K)x.extend(K[o]);return ft};x.extend=function(i){var t=$(x._parser.res,i.res),e=i.extender||{};x._formatter=$(x._formatter,i.formatter,!1,t),x._parser=$(x._parser,i.parser,!1,t);for(var s in e)x[s]||(x[s]=e[s])};x.plugin=function(i){var t=typeof i=="function"?i:x.plugin[i];t&&x.extend(K[t(S,x)]||{})};var z=x;var fi=new Date("2025-01-01T00:00:00Z"),H=10002,he=H-1;function ce(i=new Date){return new Date(i.setUTCHours(23,59,59,0))}function X(i=new Date){return Math.floor(z.subtract(i,fi).toDays())%H}function dt(i=new Date){return X(z.addDays(i,-1))}function di(i,t){return(t-i+H)%H}function le(i){if(isNaN(i)||i<0||i>H-1)throw new Error(`Index must be within [0, ${H-1}]`);let t=ce(),e=X(t);if(i===e)return t;if(i===dt())return z.addDays(t,-1);let s=di(e,i);return z.addDays(t,s)}function Ft(i,t=new Date){if(isNaN(i)||i<-1||i>he-1)throw new Error(`TTL must be within [-1, ${he-1}]`);return z.addDays(ce(t),Math.floor(i))}function ue(i){let t=new Date;return i.getTime()<t.getTime()?0:z.subtract(i,t).toDays()}function fe(i){return i===dt()}var Q=class i extends Map{inv;constructor(t,e){if(super(t),e)this.inv=e;else{let s=Array.from(this).map(([r,n])=>[n,r]);if(this.inv=new i(s,this),this.inv.size<s.length)throw new Error("Breaking bijection")}if(this.size!==this.inv.size)throw new Error("Breaking bijection")}delete(t){let e=this.get(t);return this.inv?.__delete(e),super.delete(t)}__delete(t){return super.delete(t)}set(t,e){if(this.inv?.has(e))throw new Error("Breaking bijection");return this.delete(t),this.inv?.__set(e,t),super.set(t,e)}regenInverseOf(){this.inv.__clear();for(let[t,e]of this.entries())this.inv.__set(e,t)}push(t,e){if(!this.inv?.has(e))return this.set(t,e);this.__delete(this.inv.get(e)),this.__set(t,e),this.regenInverseOf()}__set(t,e){return super.set(t,e)}clear(){return this.inv?.__clear(),super.clear()}__clear(){return super.clear()}};function de(...i){return i.length>1?i:i[0]}async function pt(...i){return de(...i)}var pe=pt;function I(){return typeof navigator=="object"&&"userAgent"in navigator?navigator.userAgent:typeof process=="object"&&process.version!==void 0?`Node.js/${process.version.substr(1)} (${process.platform}; ${process.arch})`:"<environment undetectable>"}var yi="0.0.0-development",mi=`octokit-endpoint.js/${yi} ${I()}`,gi={method:"GET",baseUrl:"https://api.github.com",headers:{accept:"application/vnd.github.v3+json","user-agent":mi},mediaType:{format:""}};function wi(i){return i?Object.keys(i).reduce((t,e)=>(t[e.toLowerCase()]=i[e],t),{}):{}}function bi(i){if(typeof i!="object"||i===null||Object.prototype.toString.call(i)!=="[object Object]")return!1;let t=Object.getPrototypeOf(i);if(t===null)return!0;let e=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&Function.prototype.call(e)===Function.prototype.call(i)}function ge(i,t){let e=Object.assign({},i);return Object.keys(t).forEach(s=>{bi(t[s])?s in i?e[s]=ge(i[s],t[s]):Object.assign(e,{[s]:t[s]}):Object.assign(e,{[s]:t[s]})}),e}function ye(i){for(let t in i)i[t]===void 0&&delete i[t];return i}function Rt(i,t,e){if(typeof t=="string"){let[r,n]=t.split(" ");e=Object.assign(n?{method:r,url:n}:{url:r},e)}else e=Object.assign({},t);e.headers=wi(e.headers),ye(e),ye(e.headers);let s=ge(i||{},e);return e.url==="/graphql"&&(i&&i.mediaType.previews?.length&&(s.mediaType.previews=i.mediaType.previews.filter(r=>!s.mediaType.previews.includes(r)).concat(s.mediaType.previews)),s.mediaType.previews=(s.mediaType.previews||[]).map(r=>r.replace(/-preview/,""))),s}function xi(i,t){let e=/\?/.test(i)?"&":"?",s=Object.keys(t);return s.length===0?i:i+e+s.map(r=>r==="q"?"q="+t.q.split("+").map(encodeURIComponent).join("+"):`${r}=${encodeURIComponent(t[r])}`).join("&")}var Ti=/\{[^{}}]+\}/g;function vi(i){return i.replace(/(?:^\W+)|(?:(?<!\W)\W+$)/g,"").split(/,/)}function Si(i){let t=i.match(Ti);return t?t.map(vi).reduce((e,s)=>e.concat(s),[]):[]}function me(i,t){let e={__proto__:null};for(let s of Object.keys(i))t.indexOf(s)===-1&&(e[s]=i[s]);return e}function we(i){return i.split(/(%[0-9A-Fa-f]{2})/g).map(function(t){return/%[0-9A-Fa-f]/.test(t)||(t=encodeURI(t).replace(/%5B/g,"[").replace(/%5D/g,"]")),t}).join("")}function L(i){return encodeURIComponent(i).replace(/[!'()*]/g,function(t){return"%"+t.charCodeAt(0).toString(16).toUpperCase()})}function tt(i,t,e){return t=i==="+"||i==="#"?we(t):L(t),e?L(e)+"="+t:t}function W(i){return i!=null}function Ut(i){return i===";"||i==="&"||i==="?"}function Ai(i,t,e,s){var r=i[e],n=[];if(W(r)&&r!=="")if(typeof r=="string"||typeof r=="number"||typeof r=="boolean")r=r.toString(),s&&s!=="*"&&(r=r.substring(0,parseInt(s,10))),n.push(tt(t,r,Ut(t)?e:""));else if(s==="*")Array.isArray(r)?r.filter(W).forEach(function(o){n.push(tt(t,o,Ut(t)?e:""))}):Object.keys(r).forEach(function(o){W(r[o])&&n.push(tt(t,r[o],o))});else{let o=[];Array.isArray(r)?r.filter(W).forEach(function(a){o.push(tt(t,a))}):Object.keys(r).forEach(function(a){W(r[a])&&(o.push(L(a)),o.push(tt(t,r[a].toString())))}),Ut(t)?n.push(L(e)+"="+o.join(",")):o.length!==0&&n.push(o.join(","))}else t===";"?W(r)&&n.push(L(e)):r===""&&(t==="&"||t==="?")?n.push(L(e)+"="):r===""&&n.push("");return n}function _i(i){return{expand:Ei.bind(null,i)}}function Ei(i,t){var e=["+","#",".","/",";","?","&"];return i=i.replace(/\{([^\{\}]+)\}|([^\{\}]+)/g,function(s,r,n){if(r){let a="",h=[];if(e.indexOf(r.charAt(0))!==-1&&(a=r.charAt(0),r=r.substr(1)),r.split(/,/g).forEach(function(u){var f=/([^:\*]*)(?::(\d+)|(\*))?/.exec(u);h.push(Ai(t,a,f[1],f[2]||f[3]))}),a&&a!=="+"){var o=",";return a==="?"?o="&":a!=="#"&&(o=a),(h.length!==0?a:"")+h.join(o)}else return h.join(",")}else return we(n)}),i==="/"?i:i.replace(/\/$/,"")}function be(i){let t=i.method.toUpperCase(),e=(i.url||"/").replace(/:([a-z]\w+)/g,"{$1}"),s=Object.assign({},i.headers),r,n=me(i,["method","baseUrl","url","headers","request","mediaType"]),o=Si(e);e=_i(e).expand(n),/^http/.test(e)||(e=i.baseUrl+e);let a=Object.keys(i).filter(f=>o.includes(f)).concat("baseUrl"),h=me(n,a);if(!/application\/octet-stream/i.test(s.accept)&&(i.mediaType.format&&(s.accept=s.accept.split(/,/).map(f=>f.replace(/application\/vnd(\.\w+)(\.v3)?(\.\w+)?(\+json)?$/,`application/vnd$1$2.${i.mediaType.format}`)).join(",")),e.endsWith("/graphql")&&i.mediaType.previews?.length)){let f=s.accept.match(/(?<![\w-])[\w-]+(?=-preview)/g)||[];s.accept=f.concat(i.mediaType.previews).map(c=>{let l=i.mediaType.format?`.${i.mediaType.format}`:"+json";return`application/vnd.github.${c}-preview${l}`}).join(",")}return["GET","HEAD"].includes(t)?e=xi(e,h):"data"in h?r=h.data:Object.keys(h).length&&(r=h),!s["content-type"]&&typeof r<"u"&&(s["content-type"]="application/json; charset=utf-8"),["PATCH","PUT"].includes(t)&&typeof r>"u"&&(r=""),Object.assign({method:t,url:e,headers:s},typeof r<"u"?{body:r}:null,i.request?{request:i.request}:null)}function Oi(i,t,e){return be(Rt(i,t,e))}function xe(i,t){let e=Rt(i,t),s=Oi.bind(null,e);return Object.assign(s,{DEFAULTS:e,defaults:xe.bind(null,e),merge:Rt.bind(null,e),parse:be})}var Te=xe(null,gi);var Oe=Ve(_e(),1);var B=class extends Error{name;status;request;response;constructor(t,e,s){super(t),this.name="HttpError",this.status=Number.parseInt(e),Number.isNaN(this.status)&&(this.status=0),"response"in s&&(this.response=s.response);let r=Object.assign({},s.request);s.request.headers.authorization&&(r.headers=Object.assign({},s.request.headers,{authorization:s.request.headers.authorization.replace(/(?<! ) .*$/," [REDACTED]")})),r.url=r.url.replace(/\bclient_secret=\w+/g,"client_secret=[REDACTED]").replace(/\baccess_token=\w+/g,"access_token=[REDACTED]"),this.request=r}};var Ci="0.0.0-development",Di={headers:{"user-agent":`octokit-request.js/${Ci} ${I()}`}};function Fi(i){if(typeof i!="object"||i===null||Object.prototype.toString.call(i)!=="[object Object]")return!1;let t=Object.getPrototypeOf(i);if(t===null)return!0;let e=Object.prototype.hasOwnProperty.call(t,"constructor")&&t.constructor;return typeof e=="function"&&e instanceof e&&Function.prototype.call(e)===Function.prototype.call(i)}async function Ee(i){let t=i.request?.fetch||globalThis.fetch;if(!t)throw new Error("fetch is not set. Please pass a fetch implementation as new Octokit({ request: { fetch }}). Learn more at https://github.com/octokit/octokit.js/#fetch-missing");let e=i.request?.log||console,s=i.request?.parseSuccessResponseBody!==!1,r=Fi(i.body)||Array.isArray(i.body)?JSON.stringify(i.body):i.body,n=Object.fromEntries(Object.entries(i.headers).map(([c,l])=>[c,String(l)])),o;try{o=await t(i.url,{method:i.method,body:r,redirect:i.request?.redirect,headers:n,signal:i.request?.signal,...i.body&&{duplex:"half"}})}catch(c){let l="Unknown Error";if(c instanceof Error){if(c.name==="AbortError")throw c.status=500,c;l=c.message,c.name==="TypeError"&&"cause"in c&&(c.cause instanceof Error?l=c.cause.message:typeof c.cause=="string"&&(l=c.cause))}let p=new B(l,500,{request:i});throw p.cause=c,p}let a=o.status,h=o.url,u={};for(let[c,l]of o.headers)u[c]=l;let f={url:h,status:a,headers:u,data:""};if("deprecation"in u){let c=u.link&&u.link.match(/<([^<>]+)>; rel="deprecation"/),l=c&&c.pop();e.warn(`[@octokit/request] "${i.method} ${i.url}" is deprecated. It is scheduled to be removed on ${u.sunset}${l?`. See ${l}`:""}`)}if(a===204||a===205)return f;if(i.method==="HEAD"){if(a<400)return f;throw new B(o.statusText,a,{response:f,request:i})}if(a===304)throw f.data=await Mt(o),new B("Not modified",a,{response:f,request:i});if(a>=400)throw f.data=await Mt(o),new B(Ri(f.data),a,{response:f,request:i});return f.data=s?await Mt(o):o.body,f}async function Mt(i){let t=i.headers.get("content-type");if(!t)return i.text().catch(()=>"");let e=(0,Oe.safeParse)(t);if(Ui(e)){let s="";try{return s=await i.text(),JSON.parse(s)}catch{return s}}else return e.type.startsWith("text/")||e.parameters.charset?.toLowerCase()==="utf-8"?i.text().catch(()=>""):i.arrayBuffer().catch(()=>new ArrayBuffer(0))}function Ui(i){return i.type==="application/json"||i.type==="application/scim+json"}function Ri(i){if(typeof i=="string")return i;if(i instanceof ArrayBuffer)return"Unknown error";if("message"in i){let t="documentation_url"in i?` - ${i.documentation_url}`:"";return Array.isArray(i.errors)?`${i.message}: ${i.errors.map(e=>JSON.stringify(e)).join(", ")}${t}`:`${i.message}${t}`}return`Unknown error: ${JSON.stringify(i)}`}function $t(i,t){let e=i.defaults(t);return Object.assign(function(r,n){let o=e.merge(r,n);if(!o.request||!o.request.hook)return Ee(e.parse(o));let a=(h,u)=>Ee(e.parse(e.merge(h,u)));return Object.assign(a,{endpoint:e,defaults:$t.bind(null,e)}),o.request.hook(a,o)},{endpoint:e,defaults:$t.bind(null,e)})}var wt=$t(Te,Di);var Mi="0.0.0-development";function $i(i){return`Request failed due to following response errors:
`+i.errors.map(t=>` - ${t.message}`).join(`
`)}var zi=class extends Error{constructor(i,t,e){super($i(e)),this.request=i,this.headers=t,this.response=e,this.errors=e.errors,this.data=e.data,Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}name="GraphqlResponseError";errors;data},ji=["method","baseUrl","url","headers","request","query","mediaType","operationName"],Bi=["query","method","url"],Ce=/\/api\/v3\/?$/;function Ni(i,t,e){if(e){if(typeof t=="string"&&"query"in e)return Promise.reject(new Error('[@octokit/graphql] "query" cannot be used as variable name'));for(let o in e)if(Bi.includes(o))return Promise.reject(new Error(`[@octokit/graphql] "${o}" cannot be used as variable name`))}let s=typeof t=="string"?Object.assign({query:t},e):t,r=Object.keys(s).reduce((o,a)=>ji.includes(a)?(o[a]=s[a],o):(o.variables||(o.variables={}),o.variables[a]=s[a],o),{}),n=s.baseUrl||i.endpoint.DEFAULTS.baseUrl;return Ce.test(n)&&(r.url=n.replace(Ce,"/api/graphql")),i(r).then(o=>{if(o.data.errors){let a={};for(let h of Object.keys(o.headers))a[h]=o.headers[h];throw new zi(r,a,o.data)}return o.data.data})}function zt(i,t){let e=i.defaults(t);return Object.assign((r,n)=>Ni(e,r,n),{defaults:zt.bind(null,e),endpoint:e.endpoint})}var Ss=zt(wt,{headers:{"user-agent":`octokit-graphql.js/${Mi} ${I()}`},method:"POST",url:"/graphql"});function De(i){return zt(i,{method:"POST",url:"/graphql"})}async function jt(i,t="SHA-256"){return crypto.subtle.digest(t,i).then(e=>new Uint8Array(e))}async function Hi(i,t){let e=await crypto.subtle.importKey("raw",E(i),"PBKDF2",!1,["deriveBits"]);return new Uint8Array(await crypto.subtle.deriveBits({name:"PBKDF2",salt:t,iterations:1e5,hash:"SHA-256"},e,256))}var it=class extends D{key;async iv(t){return crypto.getRandomValues(new Uint8Array(32))}static async constructor(t,e,s=void 0){s&&(this.iv=s),this.key=await Hi(t,e).then(r=>crypto.subtle.importKey("raw",r,"AES-GCM",!0,["encrypt","decrypt"]))}async encrypt(t){let e=await this.iv(t).then(r=>jt(r)),s=new Uint8Array(await crypto.subtle.encrypt({name:"AES-GCM",iv:e},this.key,t));return Y([e,s])}async decrypt(t){let e=t.slice(0,32),s=t.slice(32);return new Uint8Array(await crypto.subtle.decrypt({name:"AES-GCM",iv:e},this.key,s))}};async function Nt(i,t="blob",e="SHA-1"){let s=await Y([E(`${t} ${i.length}\0`),i]);return At(await jt(s,e))}async function Ue(i){let t;switch(M(i)){case"Number":case"Boolean":case"String":t=E(i.toString());break;case"Array":case"Object":t=E(JSON.stringify(i));break;case"Uint8Array":t=i;break;case"ArrayBuffer":t=new Uint8Array(i);break;default:throw new Error("Unsupported parameter type")}return Nt(t)}var Bt={tree:"40000",blob:"100644",file:"100644",exec:"100755",sym:"120000",commit:"160000"};function Ii(i){let t=this[i];return{name:i,mode:Bt[t.type],hash:t.hash}}function Wi(i,t){let e=i.mode===Bt.tree?i.name+"/":i.name,s=t.mode===Bt.tree?t.name+"/":t.name;return e>s?1:e<s?-1:0}async function Re(i){let t=Object.keys(i).map(Ii,i).sort(Wi),e=[];for(let r of t)e.push(E(`${r.mode} ${r.name}\0`),_t(r.hash));let s=await Y(e);return Nt(s,"tree")}function Li(i){return`${Math.floor(i.getTime()/1e3)} +0000`}function Fe({name:i,email:t,date:e}){let s=isNaN(Date.parse(e))?e:Li(new Date(e));return`${i} <${t}> ${s}`}async function Me({treeHash:i,parentCommitHashes:t=[],message:e="",author:s,committer:r}){e&&!e.endsWith(`
`)&&(e+=`
`);let n;return n=t.reduce((o,a)=>`${o}
parent ${a}`,`tree ${i}`),n+=`
author ${Fe(s)}`,n+=`
committer ${Fe(r)}`,n+=`
`,n+=`
${e}`,Nt(E(n),"commit")}var st=class extends D{ratelimit={};static async constructor(t,{auth:e,encrypt:s,decrypt:r,committer:n,author:o,fetch:a=globalThis.fetch}={}){let[h,u]=t.split("/");this.owner=h,this.name=u,this.authenticated=!!e,this.committer=n??o??{},this.author=o??this.committer,this.encrypted=!!s||!!r,this.encrypt=s??pt,this.decrypt=r??pt;let f=this.ratelimit;this.request=wt.defaults({owner:h,repo:u,headers:{Authorization:e?`Bearer ${e}`:void 0,"X-GitHub-Api-Version":"2022-11-28"},request:{fetch:async(...b)=>{if(f.remaining===0&&new Date().getTime()/1e3<f.reset)return new Response(`Ratelimited. Try after ${new Date(f.reset*1e3)}.`,{status:429,statusText:"Too Many Requests"});let y=await a(...b),w=y.headers;return f.reset=w.get("x-ratelimit-reset")??void 0,f.used=w.get("x-ratelimit-used")??void 0,f.remaining=w.get("x-ratelimit-remaining")??void 0,f["retry-after"]=w.get("retry-after")??void 0,y}}}),this.graphql=De(this.request);let{node_id:c,visibility:l,created_at:p}=await this.request("GET /repos/{owner}/{repo}").then(b=>b.data);this.id=c,this.isPublic=l==="public",this.created=new Date(p).getTime()}async hasCommit(t){return this.request("HEAD /repos/{owner}/{repo}/git/commits/{commitHash}",{commitHash:t}).then(()=>!0).catch(e=>{if(e.status===404)return!1;throw new Error(`GitHub API network error: ${e.status}`,{cause:e})})}async hasRef(t){return t.startsWith("refs/")?t=t.substring(5):t=`heads/${t}`,this.request("HEAD /repos/{owner}/{repo}/git/ref/{ref}",{ref:t}).then(()=>!0).catch(e=>{if(e.status===404)return!1;throw new Error(`GitHub API network error: ${e.status}`,{cause:e})})}async commitBytes(t,{message:e="",encrypt:s=this.encrypted,paths:r=["bytes"],author:n={...this.author},committer:o=structuredClone(this.committer),parentCommitHashes:a=[],push:h=!0}={}){e&&!e.endsWith(`
`)&&(e+=`
`),o.date===void 0&&(o.date=new Date().toISOString()),n.date===void 0&&(n.date=o.date);let u=s?await this.encrypt(t):t,f=await Ue(u),c={},l=[];for(let d of r)c[d]={type:"blob",hash:f},l.push({path:d,type:"blob",mode:"100644",sha:f});let p=await Re(c),b=await Me({treeHash:p,message:e,committer:o,author:n,parentCommitHashes:a});if(!h||await this.hasCommit(b))return b;let y=kt(u);await this.request("POST /repos/{owner}/{repo}/git/blobs",{content:y,encoding:"base64"}),await this.request("POST /repos/{owner}/{repo}/git/trees",{tree:l});let w=await this.request("POST /repos/{owner}/{repo}/git/commits",{message:e,tree:p,author:n,committer:o,parents:a}).then(d=>d.data.sha);if(b!==w)throw new Error(`Upstream commit hash ${w} doesn't match locally computed ${b}`);return w}async updateRefs([...t]){let e="0000000000000000000000000000000000000000";for(let s of t){let{name:r,beforeOid:n,afterOid:o,force:a}=s;r.startsWith("refs/")||(s.name=`refs/heads/${r}`),n===null&&(s.beforeOid=e),s.afterOid=o??e,s.force=a??!0}await this.graphql(`
    mutation($repositoryId: ID!, $refUpdates: [RefUpdate!]!) {
      updateRefs(input: { repositoryId: $repositoryId, refUpdates: $refUpdates }) {
        clientMutationId
      }
    }
  `,{repositoryId:this.id,refUpdates:t})}async refToCommitHash(t){return t.startsWith("refs/")?t=t.substring(5):t=`heads/${t}`,this.request("GET /repos/{owner}/{repo}/git/ref/{ref}",{ref:t}).then(e=>e.data.object.sha).catch(e=>{if(e.status!==404)throw e})}async fetchBlobContent(t,{decrypt:e=this.encrypted}={}){return this.request("GET /repos/{owner}/{repo}/git/blobs/{blobHash}",{blobHash:t}).then(s=>ct(s.data.content)).catch(s=>{if(s.status!==404)throw s}).then(s=>e?this.decrypt(s):s)}async fetchCommitContent(t,{decrypt:e=this.encrypted,path:s="bytes"}={}){if(!this.isPublic)return this.request("GET /repos/{owner}/{repo}/contents/{path}",{path:s,ref:t}).then(r=>r.data.sha).catch(r=>{if(r.status!==404)throw r}).then(r=>this.fetchBlobContent(r,{decrypt:e}));for(let r of this.cdnLinks(t,s))try{let n=await fetch(r,{redirect:"follow"}).then(o=>{if(!o.ok)throw new Error(o.status);return o.bytes()});return e?this.decrypt(n):n}catch(n){if(n.message==="404")return;continue}throw new Error("Unexpected failure with CDNs")}async fetchCommitMessage(t){return this.request("GET /repos/{owner}/{repo}/git/commits/{ref}",{ref:t}).then(e=>e.data.message).catch(e=>{if(e.status!==404)throw e})}cdnLinks(t,e="bytes"){if(typeof e!="string"||e.startsWith("./"))throw new Error("Pass proper path parameter");if(!this.isPublic)return[];let s=this.owner,r=this.name;return[`https://cdn.jsdelivr.net/gh/${s}/${r}@${t}/${e}`,`https://cdn.statically.io/gh/${s}/${r}/${t}/${e}`,`https://rawcdn.githack.com/${s}/${r}/${t}/${e}`,`https://esm.sh/gh/${s}/${r}@${t}/${e}`,`https://raw.githubusercontent.com/${s}/${r}/${t}/${e}`]}async listBranchesTo(t){return(await this.request("GET /repos/{owner}/{repo}/commits/{commitHash}/branches-where-head",{commitHash:t}).then(s=>s.data)).map(s=>s.name)}};var q=typeof performance=="object"&&performance&&typeof performance.now=="function"?performance:Date,ze=new Set,Ht=typeof process=="object"&&process?process:{},je=(i,t,e,s)=>{typeof Ht.emitWarning=="function"?Ht.emitWarning(i,t,e,s):console.error(`[${e}] ${t}: ${i}`)},bt=globalThis.AbortController,$e=globalThis.AbortSignal;if(typeof bt>"u"){$e=class{onabort;_onabort=[];reason;aborted=!1;addEventListener(s,r){this._onabort.push(r)}},bt=class{constructor(){t()}signal=new $e;abort(s){if(!this.signal.aborted){this.signal.reason=s,this.signal.aborted=!0;for(let r of this.signal._onabort)r(s);this.signal.onabort?.(s)}}};let i=Ht.env?.LRU_CACHE_IGNORE_AC_WARNING!=="1",t=()=>{i&&(i=!1,je("AbortController is not defined. If using lru-cache in node 14, load an AbortController polyfill from the `node-abort-controller` package. A minimal polyfill is provided for use by LRUCache.fetch(), but it should not be relied upon in other contexts (eg, passing it to other APIs that use AbortController/AbortSignal might have undesirable effects). You may disable this with LRU_CACHE_IGNORE_AC_WARNING=1 in the env.","NO_ABORT_CONTROLLER","ENOTSUP",t))}}var Pi=i=>!ze.has(i),Is=Symbol("type"),U=i=>i&&i===Math.floor(i)&&i>0&&isFinite(i),Be=i=>U(i)?i<=Math.pow(2,8)?Uint8Array:i<=Math.pow(2,16)?Uint16Array:i<=Math.pow(2,32)?Uint32Array:i<=Number.MAX_SAFE_INTEGER?P:null:null,P=class extends Array{constructor(t){super(t),this.fill(0)}},It=class i{heap;length;static#a=!1;static create(t){let e=Be(t);if(!e)return[];i.#a=!0;let s=new i(t,e);return i.#a=!1,s}constructor(t,e){if(!i.#a)throw new TypeError("instantiate Stack using Stack.create(n)");this.heap=new e(t),this.length=0}push(t){this.heap[this.length++]=t}pop(){return this.heap[--this.length]}},rt=class i{#a;#u;#y;#O;#m;#U;#R;ttl;ttlResolution;ttlAutopurge;updateAgeOnGet;updateAgeOnHas;allowStale;noDisposeOnSet;noUpdateTTL;maxEntrySize;sizeCalculation;noDeleteOnFetchRejection;noDeleteOnStaleGet;allowStaleOnFetchAbort;allowStaleOnFetchRejection;ignoreFetchAbort;#r;#g;#s;#i;#t;#c;#f;#h;#n;#w;#o;#b;#x;#d;#T;#E;#l;#M;static unsafeExposeInternals(t){return{starts:t.#x,ttls:t.#d,sizes:t.#b,keyMap:t.#s,keyList:t.#i,valList:t.#t,next:t.#c,prev:t.#f,get head(){return t.#h},get tail(){return t.#n},free:t.#w,isBackgroundFetch:e=>t.#e(e),backgroundFetch:(e,s,r,n)=>t.#j(e,s,r,n),moveToTail:e=>t.#F(e),indexes:e=>t.#v(e),rindexes:e=>t.#S(e),isStale:e=>t.#p(e)}}get max(){return this.#a}get maxSize(){return this.#u}get calculatedSize(){return this.#g}get size(){return this.#r}get fetchMethod(){return this.#U}get memoMethod(){return this.#R}get dispose(){return this.#y}get onInsert(){return this.#O}get disposeAfter(){return this.#m}constructor(t){let{max:e=0,ttl:s,ttlResolution:r=1,ttlAutopurge:n,updateAgeOnGet:o,updateAgeOnHas:a,allowStale:h,dispose:u,onInsert:f,disposeAfter:c,noDisposeOnSet:l,noUpdateTTL:p,maxSize:b=0,maxEntrySize:y=0,sizeCalculation:w,fetchMethod:d,memoMethod:m,noDeleteOnFetchRejection:v,noDeleteOnStaleGet:g,allowStaleOnFetchRejection:T,allowStaleOnFetchAbort:O,ignoreFetchAbort:A}=t;if(e!==0&&!U(e))throw new TypeError("max option must be a nonnegative integer");let C=e?Be(e):Array;if(!C)throw new Error("invalid max value: "+e);if(this.#a=e,this.#u=b,this.maxEntrySize=y||this.#u,this.sizeCalculation=w,this.sizeCalculation){if(!this.#u&&!this.maxEntrySize)throw new TypeError("cannot set sizeCalculation without setting maxSize or maxEntrySize");if(typeof this.sizeCalculation!="function")throw new TypeError("sizeCalculation set to non-function")}if(m!==void 0&&typeof m!="function")throw new TypeError("memoMethod must be a function if defined");if(this.#R=m,d!==void 0&&typeof d!="function")throw new TypeError("fetchMethod must be a function if specified");if(this.#U=d,this.#E=!!d,this.#s=new Map,this.#i=new Array(e).fill(void 0),this.#t=new Array(e).fill(void 0),this.#c=new C(e),this.#f=new C(e),this.#h=0,this.#n=0,this.#w=It.create(e),this.#r=0,this.#g=0,typeof u=="function"&&(this.#y=u),typeof f=="function"&&(this.#O=f),typeof c=="function"?(this.#m=c,this.#o=[]):(this.#m=void 0,this.#o=void 0),this.#T=!!this.#y,this.#M=!!this.#O,this.#l=!!this.#m,this.noDisposeOnSet=!!l,this.noUpdateTTL=!!p,this.noDeleteOnFetchRejection=!!v,this.allowStaleOnFetchRejection=!!T,this.allowStaleOnFetchAbort=!!O,this.ignoreFetchAbort=!!A,this.maxEntrySize!==0){if(this.#u!==0&&!U(this.#u))throw new TypeError("maxSize must be a positive integer if specified");if(!U(this.maxEntrySize))throw new TypeError("maxEntrySize must be a positive integer if specified");this.#q()}if(this.allowStale=!!h,this.noDeleteOnStaleGet=!!g,this.updateAgeOnGet=!!o,this.updateAgeOnHas=!!a,this.ttlResolution=U(r)||r===0?r:1,this.ttlAutopurge=!!n,this.ttl=s||0,this.ttl){if(!U(this.ttl))throw new TypeError("ttl must be a positive integer if specified");this.#B()}if(this.#a===0&&this.ttl===0&&this.#u===0)throw new TypeError("At least one of max, maxSize, or ttl is required");if(!this.ttlAutopurge&&!this.#a&&!this.#u){let _="LRU_CACHE_UNBOUNDED";Pi(_)&&(ze.add(_),je("TTL caching without ttlAutopurge, max, or maxSize can result in unbounded memory consumption.","UnboundedCacheWarning",_,i))}}getRemainingTTL(t){return this.#s.has(t)?1/0:0}#B(){let t=new P(this.#a),e=new P(this.#a);this.#d=t,this.#x=e,this.#N=(n,o,a=q.now())=>{if(e[n]=o!==0?a:0,t[n]=o,o!==0&&this.ttlAutopurge){let h=setTimeout(()=>{this.#p(n)&&this.#A(this.#i[n],"expire")},o+1);h.unref&&h.unref()}},this.#C=n=>{e[n]=t[n]!==0?q.now():0},this.#_=(n,o)=>{if(t[o]){let a=t[o],h=e[o];if(!a||!h)return;n.ttl=a,n.start=h,n.now=s||r();let u=n.now-h;n.remainingTTL=a-u}};let s=0,r=()=>{let n=q.now();if(this.ttlResolution>0){s=n;let o=setTimeout(()=>s=0,this.ttlResolution);o.unref&&o.unref()}return n};this.getRemainingTTL=n=>{let o=this.#s.get(n);if(o===void 0)return 0;let a=t[o],h=e[o];if(!a||!h)return 1/0;let u=(s||r())-h;return a-u},this.#p=n=>{let o=e[n],a=t[n];return!!a&&!!o&&(s||r())-o>a}}#C=()=>{};#_=()=>{};#N=()=>{};#p=()=>!1;#q(){let t=new P(this.#a);this.#g=0,this.#b=t,this.#D=e=>{this.#g-=t[e],t[e]=0},this.#H=(e,s,r,n)=>{if(this.#e(s))return 0;if(!U(r))if(n){if(typeof n!="function")throw new TypeError("sizeCalculation must be a function");if(r=n(s,e),!U(r))throw new TypeError("sizeCalculation return invalid (expect positive integer)")}else throw new TypeError("invalid size value (must be positive integer). When maxSize or maxEntrySize is used, sizeCalculation or size must be set.");return r},this.#$=(e,s,r)=>{if(t[e]=s,this.#u){let n=this.#u-t[e];for(;this.#g>n;)this.#z(!0)}this.#g+=t[e],r&&(r.entrySize=s,r.totalCalculatedSize=this.#g)}}#D=t=>{};#$=(t,e,s)=>{};#H=(t,e,s,r)=>{if(s||r)throw new TypeError("cannot set size without setting maxSize or maxEntrySize on cache");return 0};*#v({allowStale:t=this.allowStale}={}){if(this.#r)for(let e=this.#n;!(!this.#I(e)||((t||!this.#p(e))&&(yield e),e===this.#h));)e=this.#f[e]}*#S({allowStale:t=this.allowStale}={}){if(this.#r)for(let e=this.#h;!(!this.#I(e)||((t||!this.#p(e))&&(yield e),e===this.#n));)e=this.#c[e]}#I(t){return t!==void 0&&this.#s.get(this.#i[t])===t}*entries(){for(let t of this.#v())this.#t[t]!==void 0&&this.#i[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#i[t],this.#t[t]])}*rentries(){for(let t of this.#S())this.#t[t]!==void 0&&this.#i[t]!==void 0&&!this.#e(this.#t[t])&&(yield[this.#i[t],this.#t[t]])}*keys(){for(let t of this.#v()){let e=this.#i[t];e!==void 0&&!this.#e(this.#t[t])&&(yield e)}}*rkeys(){for(let t of this.#S()){let e=this.#i[t];e!==void 0&&!this.#e(this.#t[t])&&(yield e)}}*values(){for(let t of this.#v())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}*rvalues(){for(let t of this.#S())this.#t[t]!==void 0&&!this.#e(this.#t[t])&&(yield this.#t[t])}[Symbol.iterator](){return this.entries()}[Symbol.toStringTag]="LRUCache";find(t,e={}){for(let s of this.#v()){let r=this.#t[s],n=this.#e(r)?r.__staleWhileFetching:r;if(n!==void 0&&t(n,this.#i[s],this))return this.get(this.#i[s],e)}}forEach(t,e=this){for(let s of this.#v()){let r=this.#t[s],n=this.#e(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(e,n,this.#i[s],this)}}rforEach(t,e=this){for(let s of this.#S()){let r=this.#t[s],n=this.#e(r)?r.__staleWhileFetching:r;n!==void 0&&t.call(e,n,this.#i[s],this)}}purgeStale(){let t=!1;for(let e of this.#S({allowStale:!0}))this.#p(e)&&(this.#A(this.#i[e],"expire"),t=!0);return t}info(t){let e=this.#s.get(t);if(e===void 0)return;let s=this.#t[e],r=this.#e(s)?s.__staleWhileFetching:s;if(r===void 0)return;let n={value:r};if(this.#d&&this.#x){let o=this.#d[e],a=this.#x[e];if(o&&a){let h=o-(q.now()-a);n.ttl=h,n.start=Date.now()}}return this.#b&&(n.size=this.#b[e]),n}dump(){let t=[];for(let e of this.#v({allowStale:!0})){let s=this.#i[e],r=this.#t[e],n=this.#e(r)?r.__staleWhileFetching:r;if(n===void 0||s===void 0)continue;let o={value:n};if(this.#d&&this.#x){o.ttl=this.#d[e];let a=q.now()-this.#x[e];o.start=Math.floor(Date.now()-a)}this.#b&&(o.size=this.#b[e]),t.unshift([s,o])}return t}load(t){this.clear();for(let[e,s]of t){if(s.start){let r=Date.now()-s.start;s.start=q.now()-r}this.set(e,s.value,s)}}set(t,e,s={}){if(e===void 0)return this.delete(t),this;let{ttl:r=this.ttl,start:n,noDisposeOnSet:o=this.noDisposeOnSet,sizeCalculation:a=this.sizeCalculation,status:h}=s,{noUpdateTTL:u=this.noUpdateTTL}=s,f=this.#H(t,e,s.size||0,a);if(this.maxEntrySize&&f>this.maxEntrySize)return h&&(h.set="miss",h.maxEntrySizeExceeded=!0),this.#A(t,"set"),this;let c=this.#r===0?void 0:this.#s.get(t);if(c===void 0)c=this.#r===0?this.#n:this.#w.length!==0?this.#w.pop():this.#r===this.#a?this.#z(!1):this.#r,this.#i[c]=t,this.#t[c]=e,this.#s.set(t,c),this.#c[this.#n]=c,this.#f[c]=this.#n,this.#n=c,this.#r++,this.#$(c,f,h),h&&(h.set="add"),u=!1,this.#M&&this.#O?.(e,t,"add");else{this.#F(c);let l=this.#t[c];if(e!==l){if(this.#E&&this.#e(l)){l.__abortController.abort(new Error("replaced"));let{__staleWhileFetching:p}=l;p!==void 0&&!o&&(this.#T&&this.#y?.(p,t,"set"),this.#l&&this.#o?.push([p,t,"set"]))}else o||(this.#T&&this.#y?.(l,t,"set"),this.#l&&this.#o?.push([l,t,"set"]));if(this.#D(c),this.#$(c,f,h),this.#t[c]=e,h){h.set="replace";let p=l&&this.#e(l)?l.__staleWhileFetching:l;p!==void 0&&(h.oldValue=p)}}else h&&(h.set="update");this.#M&&this.onInsert?.(e,t,e===l?"update":"replace")}if(r!==0&&!this.#d&&this.#B(),this.#d&&(u||this.#N(c,r,n),h&&this.#_(h,c)),!o&&this.#l&&this.#o){let l=this.#o,p;for(;p=l?.shift();)this.#m?.(...p)}return this}pop(){try{for(;this.#r;){let t=this.#t[this.#h];if(this.#z(!0),this.#e(t)){if(t.__staleWhileFetching)return t.__staleWhileFetching}else if(t!==void 0)return t}}finally{if(this.#l&&this.#o){let t=this.#o,e;for(;e=t?.shift();)this.#m?.(...e)}}}#z(t){let e=this.#h,s=this.#i[e],r=this.#t[e];return this.#E&&this.#e(r)?r.__abortController.abort(new Error("evicted")):(this.#T||this.#l)&&(this.#T&&this.#y?.(r,s,"evict"),this.#l&&this.#o?.push([r,s,"evict"])),this.#D(e),t&&(this.#i[e]=void 0,this.#t[e]=void 0,this.#w.push(e)),this.#r===1?(this.#h=this.#n=0,this.#w.length=0):this.#h=this.#c[e],this.#s.delete(s),this.#r--,e}has(t,e={}){let{updateAgeOnHas:s=this.updateAgeOnHas,status:r}=e,n=this.#s.get(t);if(n!==void 0){let o=this.#t[n];if(this.#e(o)&&o.__staleWhileFetching===void 0)return!1;if(this.#p(n))r&&(r.has="stale",this.#_(r,n));else return s&&this.#C(n),r&&(r.has="hit",this.#_(r,n)),!0}else r&&(r.has="miss");return!1}peek(t,e={}){let{allowStale:s=this.allowStale}=e,r=this.#s.get(t);if(r===void 0||!s&&this.#p(r))return;let n=this.#t[r];return this.#e(n)?n.__staleWhileFetching:n}#j(t,e,s,r){let n=e===void 0?void 0:this.#t[e];if(this.#e(n))return n;let o=new bt,{signal:a}=s;a?.addEventListener("abort",()=>o.abort(a.reason),{signal:o.signal});let h={signal:o.signal,options:s,context:r},u=(y,w=!1)=>{let{aborted:d}=o.signal,m=s.ignoreFetchAbort&&y!==void 0;if(s.status&&(d&&!w?(s.status.fetchAborted=!0,s.status.fetchError=o.signal.reason,m&&(s.status.fetchAbortIgnored=!0)):s.status.fetchResolved=!0),d&&!m&&!w)return c(o.signal.reason);let v=p;return this.#t[e]===p&&(y===void 0?v.__staleWhileFetching?this.#t[e]=v.__staleWhileFetching:this.#A(t,"fetch"):(s.status&&(s.status.fetchUpdated=!0),this.set(t,y,h.options))),y},f=y=>(s.status&&(s.status.fetchRejected=!0,s.status.fetchError=y),c(y)),c=y=>{let{aborted:w}=o.signal,d=w&&s.allowStaleOnFetchAbort,m=d||s.allowStaleOnFetchRejection,v=m||s.noDeleteOnFetchRejection,g=p;if(this.#t[e]===p&&(!v||g.__staleWhileFetching===void 0?this.#A(t,"fetch"):d||(this.#t[e]=g.__staleWhileFetching)),m)return s.status&&g.__staleWhileFetching!==void 0&&(s.status.returnedStale=!0),g.__staleWhileFetching;if(g.__returned===g)throw y},l=(y,w)=>{let d=this.#U?.(t,n,h);d&&d instanceof Promise&&d.then(m=>y(m===void 0?void 0:m),w),o.signal.addEventListener("abort",()=>{(!s.ignoreFetchAbort||s.allowStaleOnFetchAbort)&&(y(void 0),s.allowStaleOnFetchAbort&&(y=m=>u(m,!0)))})};s.status&&(s.status.fetchDispatched=!0);let p=new Promise(l).then(u,f),b=Object.assign(p,{__abortController:o,__staleWhileFetching:n,__returned:void 0});return e===void 0?(this.set(t,b,{...h.options,status:void 0}),e=this.#s.get(t)):this.#t[e]=b,b}#e(t){if(!this.#E)return!1;let e=t;return!!e&&e instanceof Promise&&e.hasOwnProperty("__staleWhileFetching")&&e.__abortController instanceof bt}async fetch(t,e={}){let{allowStale:s=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,ttl:o=this.ttl,noDisposeOnSet:a=this.noDisposeOnSet,size:h=0,sizeCalculation:u=this.sizeCalculation,noUpdateTTL:f=this.noUpdateTTL,noDeleteOnFetchRejection:c=this.noDeleteOnFetchRejection,allowStaleOnFetchRejection:l=this.allowStaleOnFetchRejection,ignoreFetchAbort:p=this.ignoreFetchAbort,allowStaleOnFetchAbort:b=this.allowStaleOnFetchAbort,context:y,forceRefresh:w=!1,status:d,signal:m}=e;if(!this.#E)return d&&(d.fetch="get"),this.get(t,{allowStale:s,updateAgeOnGet:r,noDeleteOnStaleGet:n,status:d});let v={allowStale:s,updateAgeOnGet:r,noDeleteOnStaleGet:n,ttl:o,noDisposeOnSet:a,size:h,sizeCalculation:u,noUpdateTTL:f,noDeleteOnFetchRejection:c,allowStaleOnFetchRejection:l,allowStaleOnFetchAbort:b,ignoreFetchAbort:p,status:d,signal:m},g=this.#s.get(t);if(g===void 0){d&&(d.fetch="miss");let T=this.#j(t,g,v,y);return T.__returned=T}else{let T=this.#t[g];if(this.#e(T)){let Tt=s&&T.__staleWhileFetching!==void 0;return d&&(d.fetch="inflight",Tt&&(d.returnedStale=!0)),Tt?T.__staleWhileFetching:T.__returned=T}let O=this.#p(g);if(!w&&!O)return d&&(d.fetch="hit"),this.#F(g),r&&this.#C(g),d&&this.#_(d,g),T;let A=this.#j(t,g,v,y),_=A.__staleWhileFetching!==void 0&&s;return d&&(d.fetch=O?"stale":"refresh",_&&O&&(d.returnedStale=!0)),_?A.__staleWhileFetching:A.__returned=A}}async forceFetch(t,e={}){let s=await this.fetch(t,e);if(s===void 0)throw new Error("fetch() returned undefined");return s}memo(t,e={}){let s=this.#R;if(!s)throw new Error("no memoMethod provided to constructor");let{context:r,forceRefresh:n,...o}=e,a=this.get(t,o);if(!n&&a!==void 0)return a;let h=s(t,a,{options:o,context:r});return this.set(t,h,o),h}get(t,e={}){let{allowStale:s=this.allowStale,updateAgeOnGet:r=this.updateAgeOnGet,noDeleteOnStaleGet:n=this.noDeleteOnStaleGet,status:o}=e,a=this.#s.get(t);if(a!==void 0){let h=this.#t[a],u=this.#e(h);return o&&this.#_(o,a),this.#p(a)?(o&&(o.get="stale"),u?(o&&s&&h.__staleWhileFetching!==void 0&&(o.returnedStale=!0),s?h.__staleWhileFetching:void 0):(n||this.#A(t,"expire"),o&&s&&(o.returnedStale=!0),s?h:void 0)):(o&&(o.get="hit"),u?h.__staleWhileFetching:(this.#F(a),r&&this.#C(a),h))}else o&&(o.get="miss")}#W(t,e){this.#f[e]=t,this.#c[t]=e}#F(t){t!==this.#n&&(t===this.#h?this.#h=this.#c[t]:this.#W(this.#f[t],this.#c[t]),this.#W(this.#n,t),this.#n=t)}delete(t){return this.#A(t,"delete")}#A(t,e){let s=!1;if(this.#r!==0){let r=this.#s.get(t);if(r!==void 0)if(s=!0,this.#r===1)this.#L(e);else{this.#D(r);let n=this.#t[r];if(this.#e(n)?n.__abortController.abort(new Error("deleted")):(this.#T||this.#l)&&(this.#T&&this.#y?.(n,t,e),this.#l&&this.#o?.push([n,t,e])),this.#s.delete(t),this.#i[r]=void 0,this.#t[r]=void 0,r===this.#n)this.#n=this.#f[r];else if(r===this.#h)this.#h=this.#c[r];else{let o=this.#f[r];this.#c[o]=this.#c[r];let a=this.#c[r];this.#f[a]=this.#f[r]}this.#r--,this.#w.push(r)}}if(this.#l&&this.#o?.length){let r=this.#o,n;for(;n=r?.shift();)this.#m?.(...n)}return s}clear(){return this.#L("delete")}#L(t){for(let e of this.#S({allowStale:!0})){let s=this.#t[e];if(this.#e(s))s.__abortController.abort(new Error("deleted"));else{let r=this.#i[e];this.#T&&this.#y?.(s,r,t),this.#l&&this.#o?.push([s,r,t])}}if(this.#s.clear(),this.#t.fill(void 0),this.#i.fill(void 0),this.#d&&this.#x&&(this.#d.fill(0),this.#x.fill(0)),this.#b&&this.#b.fill(0),this.#h=0,this.#n=0,this.#w.length=0,this.#g=0,this.#r=0,this.#l&&this.#o){let e=this.#o,s;for(;s=e?.shift();)this.#m?.(...s)}}};var R={};R.bytes=new rt({max:500,maxSize:1e5,maxEntrySize:500,sizeCalculation:(i,t)=>i.length});R.msg=new rt({max:1e4});var Gi=["bytes","view.txt","view.json"],Wt="view.txt",G=new Q,ki=G.inv;function nt(i){return{bytes:`refs/heads/kv/values/${i}/bytes`,type:`refs/heads/kv/values/${i}/type`,expiry:`refs/heads/kv/expiries/${i}/dayID`,key:`refs/tags/kv/keys/${i}/key`}}function Vi(i){return i.startsWith("refs/")||(i="refs/heads/"+i),i.split("/").slice(4,-1).join("/")}function Yi({mimeType:i,extension:t}={}){return i&&t?`${i};extension=${t}`:i??""}function Zi(i){if(!i)return{};let[t,e]=i.split(";"),s=e?.split("=").pop();return{mimeType:t,extension:s}}var xt=class extends D{repository;async commitTyped(t,{encrypt:e,push:s}={}){if(t===void 0)return{};let{type:r,mimeType:n,bytes:o,extension:a}=await re(t),h=[...Gi];n&&a&&h.push(`view.${a}`);let u=Yi({mimeType:n,extension:a}),f=await this.repository.commitBytes(o,{message:u,paths:h,encrypt:e,push:s}),c,l=e??this.repository.encrypted;return a&&l===!1&&(c=this.repository.cdnLinks(f,`view.${a}`)),{commitHash:f,type:r,cdnLinks:c}}async fetchTyped(t,e,{decrypt:s,blobHash:r,commitMsg:n}={}){if(t===void 0)return;let o;this.repository.isPublic?o=this.repository.fetchCommitContent(t,{decrypt:s,path:Wt}):R.bytes.has(t)?o=R.bytes.get(t):r?o=this.repository.fetchBlobContent(r,{decrypt:s}).then(h=>(R.bytes.set(t,h),h)):o=this.repository.fetchCommitContent(t,{decrypt:s,path:Wt}).then(h=>(R.bytes.set(t,h),h)),n=n??R.msg.get(t),e==="Blob"&&n===void 0&&(n=await this.repository.fetchCommitMessage(t).then(h=>(R.msg.set(t,h),h)));let{mimeType:a}=Zi(n);return ne({bytes:await o,type:e,mimeType:a})}async init(){let t=[];for(let e of Ot){let{commitHash:s}=await this.commitTyped(e,{encrypt:!1});t.push({afterOid:s,name:`refs/tags/kv/types/${e}/type`})}await this.repository.updateRefs(t)}static async constructor(t,{auth:e,crypto:s,fetch:r,readOnly:n=!1}={}){let o,a;if(s)switch(M(s)){case"String":let u=s;s=await it.instantiate(u,E(t),pe);case"Object":o=async f=>s.encrypt(f),a=async f=>s.decrypt(f);break;default:throw new TypeError("crypto option must be a password string or object containing encrypt, decrypt methods")}let h={name:"a a",email:"a@a.a",date:"2025-01-01T00:00:00Z"};if(this.repository=await st.instantiate(t,{committer:h,auth:e,encrypt:o,decrypt:a,fetch:r}),G.size===0)for(let u of Ot){let{commitHash:f}=await this.commitTyped(u,{encrypt:!1,push:!1});G.set(u,f)}if(n){let u=function(){throw new Error("To write to database, instantiate it with option { readOnly: false }")};this.create=u,this.repository.updateRefs=u}}async keyToUuid(t,{push:e=!1}={}){let{commitHash:s,type:r}=await this.commitTyped(t,{push:e});return{uuid:`${r}/${Vt(s)}`,type:r,commitHash:s}}async uuidToKey(t){let[e,s]=t.split("/"),r=Yt(s);return this.fetchTyped(r,e)}async create(t,e,{overwrite:s,ttl:r,oldValue:n}={}){let o,a;switch(s){case!0:o=!1;break;case!1:if(n!==void 0)throw new Error("Cannot have oldValue when overwrite: false");a=null;default:o=!0}let h,u;Number.isFinite(r)&&(h=Ft(r),u=X(h));let[{uuid:f,commitHash:c},{commitHash:l,type:p,cdnLinks:b},{commitHash:y},{commitHash:w,type:d}]=await Promise.all([this.keyToUuid(t,{push:o}),this.commitTyped(e,{push:!0}),this.commitTyped(u,{push:!0,encrypt:!1}),this.commitTyped(n,{push:!1})]);e===void 0?(c=null,y=null):s===!0&&(a=c);let m=nt(f);try{return await this.repository.updateRefs([{beforeOid:a,afterOid:c,name:m.key},{beforeOid:w,afterOid:l,name:m.bytes},{beforeOid:G.get(d),afterOid:G.get(p),name:m.type},{afterOid:y,name:m.expiry}]),{uuid:f,cdnLinks:b,expiry:h}}catch(v){throw s===!1&&await this.has(t)===!0?new Error("Key exists"):s===!0&&await this.has(t)===!1?new Error("Nothing to overwrite"):p&&await this.repository.hasCommit(G.get(p))===!1?new Error("Database not initialized. Run db.init()"):new Error("Failed",{cause:v})}}async has(t){let{uuid:e}=await this.keyToUuid(t);return this.repository.hasRef(nt(e).key)}async read(t){let{uuid:e}=await this.keyToUuid(t),s=nt(e),r=s.bytes,n=s.type,o=s.expiry,a,h,u,f,c,l;if(this.repository.authenticated){let{bytes:b,type:y,expiry:w}=await this.repository.graphql(`
          query($id: ID!, $bytesRef: String!, $typeRef: String!, $expiryRef: String!, $path: String!) {
            node(id: $id) {
              ... on Repository {
                bytes: ref(qualifiedName: $bytesRef) {
                  target {
                    oid
                    ... on Commit {
                      message
                      file(path: $path){
                        oid
                      }
                    }
                  }
                }
                type:ref(qualifiedName: $typeRef) {
                  target {
                    oid
                  }
                }
                expiry:ref(qualifiedName: $expiryRef) {
                  target {
                    oid
                    ... on Commit {
                      file(path: $path){
                        object {
                          ... on Blob {
                            text
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        `,{id:this.repository.id,bytesRef:r,typeRef:n,expiryRef:o,path:Wt}).then(d=>d.node);a=b?.target?.oid,h=b?.target?.message,u=b?.target?.file?.oid,f=y?.target?.oid,l=Number(w?.target?.file?.object?.text)}else[a,f,c]=await Promise.all([this.repository.refToCommitHash(r),this.repository.refToCommitHash(n),this.repository.refToCommitHash(o)]);let p=this.fetchTyped(a,ki.get(f),{blobHash:u,commitMsg:h});return l=l??await this.fetchTyped(c,"Number",{decrypt:!1}),fe(l)?{}:{value:await p,expiry:l?le(l):void 0}}async update(t,e,{keepTtl:s=!1,ttl:r}={}){let{value:n,expiry:o}=await this.read(t),a;try{typeof n=="object"&&n!==null?a=await e(structuredClone(n)):a=await e(n)}catch(u){throw new Error('modifier() threw error. See "cause" for details.',{cause:u})}return s&&(r=ue(o)),{...this.create(t,a,{overwrite:!0,ttl:r,oldValue:n}),oldValue:n,newValue:a}}async increment(t,e=1){let s=r=>{if(M(r)!=="Number")throw new Error("Old value must be a Number");return r+e};return this.update(t,s)}async toggle(t){let e=s=>{if(M(s)!=="Boolean")throw new Error("Old value must be a Boolean");return!s};return this.update(t,e)}async delete(t,e=void 0){return this.create(t,void 0,{oldValue:e})}async expire(t,e){let s=X(Ft(e)),[{uuid:r,commitHash:n},{commitHash:o}]=await Promise.all([this.keyToUuid(t),this.commitTyped(s,{push:!0,encrypt:!1})]),a=nt(r);try{await this.repository.updateRefs([{beforeOid:n,afterOid:n,name:a.key},{afterOid:o,name:a.expiry}])}catch(h){throw await this.has(t)===!1?new Error("Nothing to expire"):new Error("Failed",{cause:h})}}async deleteUUIDs(t){let e=[];for(let s of t)Object.values(nt(s)).forEach(n=>{e.push({name:n,afterOid:null})});return this.repository.updateRefs(e)}async gc(t=new Date,{batchSize:e=10}={}){let{commitHash:s}=await this.commitTyped(dt(t),{encrypt:!1,push:!1});if(!await this.repository.hasCommit(s))return 0;let r=await this.repository.listBranchesTo(s),n=[];for(let o=0;o<r.length;o+=e)n.push(this.deleteUUIDs(r.slice(o,o+e).map(a=>Vi(a))));return await Promise.all(n),r.length}};export{xt as default};
/*! Bundled license information:

date-and-time/esm/date-and-time.mjs:
  (**
   * @preserve date-and-time (c) KNOWLEDGECODE | MIT
   *)
*/
